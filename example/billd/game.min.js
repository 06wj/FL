R={},R.images=[{src:"img/bat.png?121",id:"bat",size:1.8},{src:"img/bg.jpg?121",id:"bg",size:21.6},{src:"img/billd_mc.png?121",id:"billd_mc",size:12.44},{src:"img/fish.png?121",id:"fish",size:1.26},{src:"img/snail.png?121",id:"snail",size:.26},{src:"img/spider.png?121",id:"spider",size:2.97},{src:"img/spring.png?121",id:"spring",size:.69},{src:"img/star.png?121",id:"star",size:.48},{src:"img/yellow_ball.png?121",id:"yellow_ball",size:1.13}];var mapData={shape:{bezier:[[[{x:2945.5,y:358.5},{x:2934.275,y:353.05},{x:2923.05,y:347.6}],[{x:2923.05,y:347.6},{x:2961.575,y:345.975},{x:3000.1,y:344.35}],[{x:3000.1,y:344.35},{x:3000.425,y:358.8},{x:3000.75,y:373.25}],[{x:3000.75,y:373.25},{x:2989.5,y:370.375},{x:2978.25,y:367.5}],[{x:2978.25,y:367.5},{x:2969.6,y:367.175},{x:2960.95,y:366.85}],[{x:2960.95,y:366.85},{x:2953.225,y:362.675},{x:2945.5,y:358.5}]],[[{x:2652.8,y:366.075},{x:2654.2189453125,y:366.6908203125},{x:2655.7,y:367.3}],[{x:2655.7,y:367.3},{x:2678.2,y:376.65},{x:2706.3,y:381.9}],[{x:2706.3,y:381.9},{x:2796.3,y:398.65},{x:2908.8,y:368}],[{x:2908.8,y:368},{x:2898.8,y:385.5},{x:2888.8,y:403}],[{x:2888.8,y:403},{x:2859.8,y:407.5},{x:2830.8,y:412}],[{x:2830.8,y:412},{x:2819.8,y:415.5},{x:2808.8,y:419}],[{x:2808.8,y:419},{x:2800.05,y:418},{x:2790.55,y:416.75}],[{x:2790.55,y:416.75},{x:2771.55,y:414.25},{x:2767.8,y:413}],[{x:2767.8,y:413},{x:2764.05,y:411.75},{x:2744.05,y:413.25}],[{x:2744.05,y:413.25},{x:2734.425,y:414.125},{x:2724.8,y:415}],[{x:2724.8,y:415},{x:2722.6578125,y:414.464453125},{x:2720.65,y:413.95}],[{x:2720.65,y:413.95},{x:2696.4173828125,y:407.8470703125},{x:2691.8,y:406}],[{x:2691.8,y:406},{x:2689.4,y:405.05},{x:2682.7,y:400.75}],[{x:2682.7,y:400.75},{x:2674.55,y:395.6},{x:2666.8,y:389.65}],[{x:2666.8,y:389.65},{x:2658.7091796875,y:383.3955078125},{x:2652.8,y:377.625}],[{x:2652.8,y:377.625},{x:2642.4591796875,y:367.5591796875},{x:2638.8,y:359}],[{x:2638.8,y:359},{x:2640.9,y:360.2},{x:2643,y:361.4}],[{x:2643,y:361.4},{x:2647.4630859375,y:363.7697265625},{x:2652.8,y:366.075}]],[[{x:2879.35,y:452.15},{x:2898.3701171875,y:445.8427734375},{x:2914.75,y:439.35}],[{x:2914.75,y:439.35},{x:2973.418359375,y:416.0697265625},{x:2998.2,y:390.35}],[{x:2998.2,y:390.35},{x:2998.5,y:419.25},{x:2998.8,y:448.15}],[{x:2998.8,y:448.15},{x:2976.15,y:448.45},{x:2941.25,y:453.5}],[{x:2941.25,y:453.5},{x:2927.8451171875,y:455.4396484375},{x:2914.75,y:457.875}],[{x:2914.75,y:457.875},{x:2859.6583984375,y:468.1515625},{x:2810.05,y:487.3}],[{x:2810.05,y:487.3},{x:2804.275,y:480.875},{x:2798.5,y:474.45}],[{x:2798.5,y:474.45},{x:2810.525,y:471.575},{x:2822.55,y:468.7}],[{x:2822.55,y:468.7},{x:2852.1,y:461.15},{x:2879.35,y:452.15}]],[[{x:2914.75,y:545.775},{x:2913.9314453125,y:545.7052734375},{x:2913.1,y:545.65}],[{x:2913.1,y:545.65},{x:2887.4,y:543.9},{x:2838.05,y:545.2}],[{x:2838.05,y:545.2},{x:2780.95,y:547.05},{x:2753,y:547.45}],[{x:2753,y:547.45},{x:2704.65,y:548.1},{x:2676.5,y:545.05}],[{x:2676.5,y:545.05},{x:2682.325,y:543.525},{x:2688.15,y:542}],[{x:2688.15,y:542},{x:2703.05,y:538.2},{x:2719.3,y:534.65}],[{x:2719.3,y:534.65},{x:2771.3,y:523.2},{x:2817.4,y:518.2}],[{x:2817.4,y:518.2},{x:2874.2794921875,y:511.9830078125},{x:2914.75,y:516.525}],[{x:2914.75,y:516.525},{x:2920.172265625,y:517.1466796875},{x:2925.3,y:517.95}],[{x:2925.3,y:517.95},{x:2979.55,y:526.45},{x:2997.575,y:556.15}],[{x:2997.575,y:556.15},{x:2998.666796875,y:557.95078125},{x:2999.7,y:559.8}],[{x:2999.7,y:559.8},{x:2999.744921875,y:559.8998046875},{x:2999.8,y:560}],[{x:2999.8,y:560},{x:2999.8,y:575.5},{x:2999.8,y:591}],[{x:2999.8,y:591},{x:2995.75,y:585.95},{x:2987.2,y:578.1}],[{x:2987.2,y:578.1},{x:2976.912109375,y:568.62421875},{x:2964.7,y:559.8}],[{x:2964.7,y:559.8},{x:2962.1541015625,y:557.9609375},{x:2959.525,y:556.15}],[{x:2959.525,y:556.15},{x:2947.9841796875,y:548.1470703125},{x:2914.75,y:545.775}]],[[{x:2655.8,y:596.5},{x:2682.6,y:604.05},{x:2710.5,y:615}],[{x:2710.5,y:615},{x:2727.35,y:621.6},{x:2758.15,y:635.15}],[{x:2758.15,y:635.15},{x:2788.9,y:648.6},{x:2804.85,y:654.85}],[{x:2804.85,y:654.85},{x:2831.6,y:665.35},{x:2856.75,y:672.25}],[{x:2856.75,y:672.25},{x:2919.25,y:689.5},{x:3000.7,y:692.15}],[{x:3000.7,y:692.15},{x:2998.7,y:748.15},{x:2996.7,y:804.15}],[{x:2996.7,y:804.15},{x:2970.7,y:802.15},{x:2944.7,y:800.15}],[{x:2944.7,y:800.15},{x:2943.125,y:771.475},{x:2941.55,y:742.8}],[{x:2941.55,y:742.8},{x:2858.6,y:720.6},{x:2764.1,y:698.45}],[{x:2764.1,y:698.45},{x:2575.15,y:654.05},{x:2517.6,y:654.05}],[{x:2517.6,y:654.05},{x:2503.1,y:654.05},{x:2481.9,y:651.35}],[{x:2481.9,y:651.35},{x:2455.25,y:647.6},{x:2438.95,y:645.5}],[{x:2438.95,y:645.5},{x:2373.9,y:637},{x:2302.75,y:637.2}],[{x:2302.75,y:637.2},{x:2148.6369140625,y:637.7267578125},{x:1904.45,y:676.225}],[{x:1904.45,y:676.225},{x:1777.7912109375,y:696.1751953125},{x:1626.9,y:726.35}],[{x:1626.9,y:726.35},{x:1606.45,y:716.8},{x:1586,y:707.25}],[{x:1586,y:707.25},{x:1515.525,y:713.25},{x:1445.05,y:719.25}],[{x:1445.05,y:719.25},{x:1439.275,y:715.5},{x:1433.5,y:711.75}],[{x:1433.5,y:711.75},{x:1404.425,y:707.725},{x:1375.35,y:703.7}],[{x:1375.35,y:703.7},{x:1358.525,y:710.475},{x:1341.7,y:717.25}],[{x:1341.7,y:717.25},{x:1307.35,y:743.85},{x:1273,y:770.45}],[{x:1273,y:770.45},{x:1261.475,y:762.15},{x:1249.95,y:753.85}],[{x:1249.95,y:753.85},{x:1236.65,y:761.625},{x:1223.35,y:769.4}],[{x:1223.35,y:769.4},{x:1213.825,y:762.875},{x:1204.3,y:756.35}],[{x:1204.3,y:756.35},{x:1192.25,y:761.625},{x:1180.2,y:766.9}],[{x:1180.2,y:766.9},{x:1170.675,y:759.625},{x:1161.15,y:752.35}],[{x:1161.15,y:752.35},{x:1150.875,y:759.125},{x:1140.6,y:765.9}],[{x:1140.6,y:765.9},{x:1123.8,y:766.4},{x:1107,y:766.9}],[{x:1107,y:766.9},{x:1087.675,y:738.325},{x:1068.35,y:709.75}],[{x:1068.35,y:709.75},{x:1054.575,y:713.75},{x:1040.8,y:717.75}],[{x:1040.8,y:717.75},{x:1018.725,y:711.475},{x:996.65,y:705.2}],[{x:996.65,y:705.2},{x:979.1,y:707.975},{x:961.55,y:710.75}],[{x:961.55,y:710.75},{x:952,y:707.475},{x:942.45,y:704.2}],[{x:942.45,y:704.2},{x:935.45,y:705.2},{x:928.45,y:706.2}],[{x:928.45,y:706.2},{x:927.2,y:695.1},{x:925.95,y:684}],[{x:925.95,y:684},{x:1277.15,y:686.25},{x:1628.35,y:688.5}],[{x:1628.35,y:688.5},{x:1677.925,y:678.275},{x:1727.5,y:668.05}],[{x:1727.5,y:668.05},{x:1817.760546875,y:650.10859375},{x:1904.45,y:634.8}],[{x:1904.45,y:634.8},{x:1935.1744140625,y:629.389453125},{x:1965.45,y:624.3}],[{x:1965.45,y:624.3},{x:2335.55,y:562.1},{x:2500.6,y:572.1}],[{x:2500.6,y:572.1},{x:2588.5,y:577.45},{x:2655.8,y:596.5}]],[[{x:2420.75,y:291.9},{x:2417,y:263.65},{x:2373.85,y:253}],[{x:2373.85,y:253},{x:2371.8,y:247.4},{x:2367.6,y:240.2}],[{x:2367.6,y:240.2},{x:2359.25,y:225.9},{x:2348.75,y:218.25}],[{x:2348.75,y:218.25},{x:2333.95,y:207.55},{x:2316.9,y:211.65}],[{x:2316.9,y:211.65},{x:2295.55,y:216.8},{x:2271.85,y:245}],[{x:2271.85,y:245},{x:2271.75,y:242.3},{x:2270,y:238.4}],[{x:2270,y:238.4},{x:2266.6,y:230.5},{x:2258.65,y:224.25}],[{x:2258.65,y:224.25},{x:2233.15,y:204.25},{x:2171.9,y:208}],[{x:2171.9,y:208},{x:2129.95,y:210.55},{x:2112.6,y:212.7}],[{x:2112.6,y:212.7},{x:2089.1,y:215.6},{x:2077.65,y:220.9}],[{x:2077.65,y:220.9},{x:2065.7,y:226.4},{x:2061.1,y:237.1}],[{x:2061.1,y:237.1},{x:2056.9,y:246.85},{x:2056.9,y:266}],[{x:2056.9,y:266},{x:2041.4,y:226.5},{x:2025.9,y:187}],[{x:2025.9,y:187},{x:2037,y:185.75},{x:2048.1,y:184.5}],[{x:2048.1,y:184.5},{x:2076.45,y:181.8},{x:2107.4,y:180.65}],[{x:2107.4,y:180.65},{x:2206.35,y:176.9},{x:2293.85,y:190}],[{x:2293.85,y:190},{x:2341.05,y:197.1},{x:2379.75,y:214.65}],[{x:2379.75,y:214.65},{x:2406.15,y:226.65},{x:2440.1,y:250}],[{x:2440.1,y:250},{x:2449.1,y:256.2},{x:2466.7,y:268.35}],[{x:2466.7,y:268.35},{x:2481.9,y:278.55},{x:2494.1,y:285.35}],[{x:2494.1,y:285.35},{x:2526.05,y:303.1},{x:2560.85,y:310}],[{x:2560.85,y:310},{x:2534.1,y:306.5},{x:2502.6,y:305.75}],[{x:2502.6,y:305.75},{x:2439.6,y:304.25},{x:2415.85,y:318}],[{x:2415.85,y:318},{x:2417.55,y:315},{x:2419,y:310.25}],[{x:2419,y:310.25},{x:2421.9,y:300.7},{x:2420.75,y:291.9}]],[[{x:709.5,y:689.15},{x:684.5,y:688.475},{x:659.5,y:687.8}],[{x:659.5,y:687.8},{x:665.625,y:703.075},{x:671.75,y:718.35}],[{x:671.75,y:718.35},{x:682.625,y:715.625},{x:693.5,y:712.9}],[{x:693.5,y:712.9},{x:701.5,y:701.025},{x:709.5,y:689.15}]],[[{x:756.1,y:680.4},{x:775.025,y:693},{x:793.95,y:705.6}],[{x:793.95,y:705.6},{x:826.45,y:707.8},{x:858.95,y:710}],[{x:858.95,y:710},{x:868.9,y:702.475},{x:878.85,y:694.95}],[{x:878.85,y:694.95},{x:817.475,y:687.675},{x:756.1,y:680.4}]],[[{x:84.55,y:344.4},{x:88.2,y:321.65},{x:88,y:321}],[{x:88,y:321},{x:89.85,y:323.175},{x:91.7,y:325.35}],[{x:91.7,y:325.35},{x:97.65,y:330.75},{x:108.8,y:336.15}],[{x:108.8,y:336.15},{x:125.4896484375,y:344.2376953125},{x:150.65,y:350.85}],[{x:150.65,y:350.85},{x:179.3287109375,y:358.38203125},{x:219,y:364}],[{x:219,y:364},{x:213.975,y:373.6},{x:208.95,y:383.2}],[{x:208.95,y:383.2},{x:181.25,y:373.4},{x:151.35,y:366.5}],[{x:151.35,y:366.5},{x:128.74765625,y:361.2607421875},{x:113.15,y:360.075}],[{x:113.15,y:360.075},{x:87.5146484375,y:358.097265625},{x:80.8,y:367.05}],[{x:80.8,y:367.05},{x:82.7,y:355.8},{x:84.55,y:344.4}]],[[{x:307.95,y:430},{x:303.95,y:427.25},{x:296.2,y:425.15}],[{x:296.2,y:425.15},{x:280.7,y:420.9},{x:261.95,y:424}],[{x:261.95,y:424},{x:243.2,y:427.15},{x:200.75,y:440.4}],[{x:200.75,y:440.4},{x:181.375,y:446.7},{x:162,y:453}],[{x:162,y:453},{x:152.525,y:446.625},{x:143.05,y:440.25}],[{x:143.05,y:440.25},{x:161.8,y:439.2},{x:191.75,y:429.5}],[{x:191.75,y:429.5},{x:251.7,y:410.15},{x:307.95,y:367}],[{x:307.95,y:367},{x:307.95,y:398.5},{x:307.95,y:430}]],[[{x:264.95,y:527},{x:259.45,y:533.575},{x:253.95,y:540.15}],[{x:253.95,y:540.15},{x:217.9,y:532.1},{x:178.8,y:527.05}],[{x:178.8,y:527.05},{x:136.9435546875,y:521.670703125},{x:113.15,y:523.5}],[{x:113.15,y:523.5},{x:92.491015625,y:525.0822265625},{x:85.45,y:532.1}],[{x:85.45,y:532.1},{x:84.875,y:516.5},{x:84.3,y:500.9}],[{x:84.3,y:500.9},{x:174.625,y:513.95},{x:264.95,y:527}]],[[{x:313.95,y:583},{x:314.975,y:567},{x:316,y:551}],[{x:316,y:551},{x:273.6,y:564.5},{x:229.75,y:581.1}],[{x:229.75,y:581.1},{x:142.05,y:614.3},{x:135,y:629.95}],[{x:135,y:629.95},{x:143.5,y:639.95},{x:152,y:649.95}],[{x:152,y:649.95},{x:151.5,y:648.3},{x:151.95,y:645.6}],[{x:151.95,y:645.6},{x:152.85,y:640.1},{x:157.5,y:634.55}],[{x:157.5,y:634.55},{x:172.55,y:616.8},{x:220,y:604.95}],[{x:220,y:604.95},{x:266.975,y:593.975},{x:313.95,y:583}]],[[{x:3,y:684.95},{x:2.9,y:688.4},{x:2.8,y:691.85}],[{x:2.8,y:691.85},{x:2.85,y:700.35},{x:4.25,y:708.3}],[{x:4.25,y:708.3},{x:8.75,y:733.9},{x:25.05,y:744.85}],[{x:25.05,y:744.85},{x:55.9,y:742.35},{x:86.75,y:739.85}],[{x:86.75,y:739.85},{x:97.275,y:747.375},{x:107.8,y:754.9}],[{x:107.8,y:754.9},{x:124.125,y:744.85},{x:140.45,y:734.8}],[{x:140.45,y:734.8},{x:151.975,y:740.575},{x:163.5,y:746.35}],[{x:163.5,y:746.35},{x:202.375,y:741.325},{x:241.25,y:736.3}],[{x:241.25,y:736.3},{x:244.25,y:729.025},{x:247.25,y:721.75}],[{x:247.25,y:721.75},{x:281.375,y:712.975},{x:315.5,y:704.2}],[{x:315.5,y:704.2},{x:330.775,y:710.725},{x:346.05,y:717.25}],[{x:346.05,y:717.25},{x:360.1,y:714.5},{x:374.15,y:711.75}],[{x:374.15,y:711.75},{x:372.55,y:698.35},{x:370.95,y:684.95}],[{x:370.95,y:684.95},{x:349.45,y:684.95},{x:327.95,y:684.95}]],[[{x:283.95,y:684.95},{x:143.475,y:684.95},{x:3,y:684.95}]],[[{x:431.85,y:711.2},{x:458.825,y:704.55},{x:485.8,y:697.9}],[{x:485.8,y:697.9},{x:527.3,y:702.975},{x:568.8,y:708.05}],[{x:568.8,y:708.05},{x:589.175,y:688.15},{x:609.55,y:668.25}],[{x:609.55,y:668.25},{x:513.75,y:677.125},{x:417.95,y:686}],[{x:417.95,y:686},{x:424.9,y:698.6},{x:431.85,y:711.2}]]],rect:[{color:"#000000",x:73.75,y:295.5,width:18,height:400.95},{color:"#ffffff",x:1289.25,y:575,width:245.7,height:37.2},{color:"#ffffff",x:1327.75,y:619.3,width:171.55,height:67.2},{color:"#000000",x:1013.95,y:644,width:307.15,height:9.05},{color:"#000000",x:1052.3,y:624.95,width:10.55,height:59.65},{color:"#000000",x:1098.45,y:625.5,width:10.55,height:59.65},{color:"#000000",x:1141.1,y:625.75,width:10.55,height:59.65},{color:"#000000",x:1185.75,y:626.05,width:10.55,height:59.65},{color:"#000000",x:1226.35,y:626.3,width:10.55,height:59.65},{color:"#000000",x:1269.65,y:625.85,width:10.55,height:59.65},{color:"#000000",x:1539,y:626.75,width:10.55,height:59.65},{color:"#000000",x:1584.65,y:626.75,width:10.55,height:59.65},{color:"#000000",x:1506.25,y:641,width:114.35,height:10.55},{color:"#000000",x:1283.1,y:568,width:258.8,height:7},{color:"#000000",x:1283.1,y:612.25,width:258.8,height:7},{color:"#000000",x:1499.35,y:618.7,width:7,height:67.8},{color:"#000000",x:1321.1,y:618.7,width:7,height:67.8},{color:"#000000",x:1419.65,y:648.3,width:7,height:38.2},{color:"#000000",x:1480,y:648.3,width:7,height:38.2},{color:"#000000",x:1419.7,y:648.3,width:67.3,height:7},{color:"#000000",x:1282.9,y:569,width:7,height:49.7},{color:"#000000",x:1534.95,y:569,width:7,height:49.7},{color:"#000000",x:304.85,y:297,width:18,height:397.95}]},mc:{spider:[{x:971.45,y:672.2},{x:452.55,y:667.95},{x:1101.5,y:622.95},{x:1447.5,y:536.95},{x:1573.5,y:610.95},{x:2776.4,y:360.95},{x:2944.4,y:415.95},{x:2966.4,y:501.9},{x:2740.4,y:510.9},{x:2962.4,y:333.95},{x:2384.45,y:464.95},{x:2499.45,y:506.9},{x:2473.45,y:208.95},{x:2148.5,y:61.95},{x:2069.5,y:130.95},{x:1871.5,y:567.95},{x:2162.45,y:546.95}],yellow_ball:[{x:1304.25,y:538.4},{x:1139.3,y:624.4},{x:1408,y:535.65},{x:1139.3,y:555.45},{x:237.8,y:638},{x:155.85,y:631},{x:2030.7,y:528},{x:2009.2,y:484.95},{x:2767.6,y:458.95},{x:2333.2,y:119.65},{x:2810.15,y:328},{x:2681.85,y:328},{x:2424.15,y:132.4},{x:2194.2,y:136.75},{x:2123.85,y:477.4},{x:2229.2,y:514.35}],player:[{x:23.8,y:618.75}],fish:[{x:385.1,y:729.8},{x:620.6,y:749.7},{x:715.1,y:743.9},{x:885.45,y:749.7}],star:[{x:1580.6,y:568.9},{x:2282.15,y:515.95},{x:151.5,y:480.1},{x:110.9,y:474.45},{x:135,y:582.25},{x:232.45,y:491.3},{x:191.8,y:485.45},{x:589.5,y:601.35},{x:498.5,y:599.6},{x:688,y:601.35},{x:881.45,y:600.8},{x:146.7,y:317.5},{x:187.3,y:328.5},{x:110.9,y:306.95},{x:264.95,y:656.15},{x:156.15,y:656.15},{x:1330.65,y:533},{x:1369.65,y:533},{x:1407.65,y:533},{x:1446.4,y:533},{x:1483.45,y:533},{x:1082.5,y:618.95},{x:1121.5,y:618.95},{x:1159.5,y:618.95},{x:1198.25,y:618.95},{x:1235.3,y:618.95},{x:209.75,y:555.95},{x:151.5,y:401.8},{x:183.5,y:394.15},{x:169.15,y:569.45},{x:263.15,y:359},{x:223.6,y:381.9},{x:1942.3,y:111.35},{x:1987.55,y:111.35},{x:1860.1,y:111.35},{x:1905.35,y:111.35},{x:1766.2,y:111.35},{x:1811.45,y:111.35},{x:1684,y:111.35},{x:1729.25,y:111.35},{x:1583.6,y:207.15},{x:1583.6,y:288.5},{x:1583.6,y:367.6},{x:1583.6,y:446.9},{x:1583.6,y:513.95},{x:1643.3,y:111.35},{x:1561.1,y:111.35},{x:1606.35,y:111.35},{x:214.25,y:47.7},{x:265.8,y:237.4},{x:305.85,y:237.4},{x:195.15,y:237.95},{x:232.2,y:237.95},{x:122.05,y:237.4},{x:159.1,y:237.4},{x:51.4,y:237.95},{x:88.45,y:237.95},{x:79.6,y:199.1},{x:114.95,y:166.25},{x:146.7,y:121.9},{x:265.8,y:115.7},{x:291.95,y:162.9},{x:315.4,y:201.6},{x:341.7,y:237.7},{x:183.5,y:79.7},{x:240.7,y:78.7},{x:103.8,y:655.3},{x:202.15,y:655.3},{x:243.25,y:544.8}],spring:[{x:2.9,y:686.15},{x:778.5,y:684.05},{x:1588.45,y:639.55},{x:2314.3,y:572.65}]},map:{width:3e3,height:800},hit:{lines:[[{x:2923.05,y:347.6},{x:3000.1,y:344.35}],[{x:2445.65,y:253.85},{x:2560.85,y:310}],[{x:2437.4,y:248.1},{x:2445.65,y:253.85}],[{x:1623.9,y:689},{x:1628.35,y:688.5}],[{x:1506.25,y:641},{x:1620.6,y:641}],[{x:659.5,y:687.8},{x:709.5,y:689.15}],[{x:754.2,y:678.95},{x:878.85,y:694.95}],[{x:88,y:321},{x:88.35,y:322.05}],[{x:92,y:296},{x:92,y:326.8}],[{x:74,y:296},{x:92,y:296}],[{x:304.95,y:297},{x:322.95,y:297}],[{x:304.95,y:297},{x:304.95,y:369.5}],[{x:90,y:504},{x:92,y:504.3}],[{x:3,y:684.95},{x:74,y:684.95}],[{x:92,y:684.95},{x:92,y:696.95}],[{x:74,y:684.95},{x:74,y:696.95}],[{x:74,y:684.95},{x:92,y:684.95}],[{x:322.95,y:684.95},{x:322.95,y:692.95}],[{x:304.95,y:684.95},{x:322.95,y:684.95}],[{x:304.95,y:684.95},{x:304.95,y:694.95}],[{x:304.95,y:554.6},{x:304.95,y:684.95}],[{x:92,y:504.3},{x:264.95,y:527}],[{x:92,y:504.3},{x:92,y:684.95}],[{x:92,y:684.95},{x:304.95,y:684.95}],[{x:417.95,y:686},{x:609.55,y:668.25}],[{x:304.95,y:369.5},{x:304.95,y:554.6}],[{x:322.95,y:297},{x:322.95,y:684.95}],[{x:92,y:326.8},{x:92,y:504.3}],[{x:74,y:296},{x:74,y:684.95}],[{x:322.95,y:684.95},{x:374.95,y:684.95}],[{x:1283.9,y:569},{x:1541.9,y:568}],[{x:925.95,y:684},{x:1623.9,y:687}],[{x:1013.95,y:644},{x:1321.1,y:644}]],beziers:[[{x:2652.8,y:366.1},{x:2685.05,y:380.05},{x:2770.3,y:405.7},{x:2908.8,y:368}],[{x:2638.8,y:359},{x:2638.8,y:359},{x:2643.6,y:362.1},{x:2652.8,y:366.1}],[{x:2798.5,y:474.45},{x:2798.5,y:474.45},{x:2858.15,y:461.85},{x:2914.75,y:439.35}],[{x:2676.5,y:545.05},{x:2676.5,y:545.05},{x:2817.35,y:505.55},{x:2914.75,y:516.55}],[{x:2500.6,y:572.1},{x:2764.65,y:588.1},{x:2756.65,y:684.15},{x:3000.7,y:692.15}],[{x:2997.6,y:556.15},{x:2998.3,y:557.35},{x:2999,y:558.55},{x:2999.7,y:559.8}],[{x:2914.75,y:516.55},{x:2952.2,y:520.75},{x:2983.15,y:532.3},{x:2997.6,y:556.15}],[{x:2914.75,y:439.35},{x:2947.75,y:426.15},{x:2979.6,y:409.7},{x:2998.2,y:390.35}],[{x:2025.9,y:187},{x:2025.9,y:187},{x:2321.3,y:145.55},{x:2437.4,y:248.1}],[{x:1628.35,y:688.5},{x:1628.35,y:688.5},{x:2236.55,y:556.1},{x:2500.6,y:572.1}],[{x:88.35,y:322.05},{x:88.75,y:323},{x:89.4,y:324},{x:90.35,y:325.05}],[{x:90.35,y:325.05},{x:90.85,y:325.6},{x:91.4,y:326.2},{x:92,y:326.8}],[{x:92,y:326.8},{x:95,y:329.65},{x:99.4,y:332.5},{x:105.15,y:335.4}],[{x:304.95,y:369.5},{x:305.95,y:368.7},{x:306.95,y:367.85},{x:307.95,y:367}],[{x:105.15,y:335.4},{x:127.3,y:346.55},{x:165.25,y:356.1},{x:219,y:364}],[{x:316,y:551},{x:316,y:551},{x:312.05,y:552.25},{x:304.95,y:554.6}],[{x:304.95,y:554.6},{x:267.95,y:566.75},{x:144.6,y:608.7},{x:135,y:629.95}],[{x:143.05,y:440.25},{x:143.05,y:440.25},{x:232.35,y:429.2},{x:304.95,y:369.5}]]},floor:[{name:"floor1",data:[{x:1554.8,y:373.8},{x:1559.8,y:142.65},{x:2017.8,y:142.65}]},{name:"floor1",data:[{x:379.25,y:489.8},{x:920.85,y:489.8},{x:920.85,y:670.75}]},{name:"floor1",data:[{x:385,y:269.05},{x:330.65,y:439.95},{x:1274.9,y:475.95},{x:2012.9,y:353.95},{x:1524.9,y:133.65},{x:2002.85,y:133.65},{x:2468.8,y:73.65},{x:2891.75,y:292.65}]},{name:"floor1",data:[{x:50.05,y:269.05},{x:664.05,y:56.1},{x:182.15,y:78.65},{x:18.05,y:269.05}]},{name:"floor1",data:[{x:329,y:600.1},{x:647.7,y:618.05}]}]};!function(win){var ns=FL.ns("billd");eval(FL.import("FL","Utils, Canvas"));var speedx=2,speedy=2,Floor=ns.Floor=function(t,i,s){i=i||84,s=s||9,Canvas.call(this,0,0),this.cacheCtx.save(),this.cacheCtx.fillStyle="#000",this.cacheCtx.fillRect(0,0,i,s),this.cacheCtx.restore(),this.setImage(i,s),this.init(t)};Utils.extends(Floor,Canvas),Floor.prototype.init=function(t){this.points=t.data.map(function(t){return new Vector(t.x,t.y)}),this.points=this.points.concat(this.points.slice(1,-1).reverse()),this.length=this.points.length,this.pos=new Vector(this.points[0].x,this.points[0].y),this.v=new Vector,this.setState(1)},Floor.prototype.setState=function(t){this.state=t%this.length,this.point=this.points[this.state],this.dis=this.point.minusNew(this.points[(this.state+this.length-1)%this.length]),this.v.x=0==this.dis.x?0:this.dis.x>0?speedx:-speedy,this.v.y=0==this.dis.y?0:this.dis.y>0?speedy:-speedy},Floor.prototype.update=function(){this.x=this.pos.x+ns.map.x,this.y=this.pos.y+ns.map.y,this.pos.plus(this.v),(this.dis.x>0&&this.pos.x>=this.point.x||this.pos.x<=this.point.x&&this.dis.x<0)&&(this.v.x=0,this.pos.x=this.point.x),(this.dis.y>0&&this.pos.y>=this.point.y||this.pos.y<=this.point.y&&this.dis.y<0)&&(this.v.y=0,this.pos.y=this.point.y),0==this.v.x&&0==this.v.y&&this.setState(this.state+1)}}(window);var ns=FL.ns("billd");eval(FL.import("FL","Utils, MovieClip, Keyboard"));var speed1=2,speed2=3.5,jumpSpeed=-6,maxSpeed=7,g=.2,idleActions=["play1","play2","stand1","attack","stand3"],IDLE_TIME=300,Player=ns.Player=function(){MovieClip.apply(this,arguments),this.action="stand2",this.time=0,this.pos=new Vector,this.v=new Vector,this.a=new Vector(0,g),this.alive=!0,this.idle=!1,this.idleTime=0,this.idleAction=idleActions[0],this.floorV=0};Utils.extends(Player,MovieClip),Player.prototype.init=function(){this.addAnimation("stand3","0-5",!0,6),this.addAnimation("stand2","6-11",!0,6),this.addAnimation("stand1","12-19",!0,6),this.addAnimation("run2","20-23",!0,4),this.addAnimation("run1","24-29",!0,6),this.addAnimation("play1","40-54",!0,6),this.addAnimation("play2","55-59",!0,6),this.addAnimation("jump2","60-70",!1,8),this.addAnimation("jump1","71-77",!1,6),this.addAnimation("attack","80-87",!0,6),this.setImg(R.images.billd_mc,22,22),this.originX=this.width>>1,this.originY=this.height,this.bounds=this.getBounds()},Player.prototype.keyAction=function(){Math.abs(this.a.x)<.001&&Keyboard.getIsDown("LEFT")?(this.v.x=Keyboard.getKeyDelay("LEFT")<300?-1*speed2:-1*speed1,this.scaleX=-1):Math.abs(this.a.x)<.001&&Keyboard.getIsDown("RIGHT")?(this.v.x=Keyboard.getKeyDelay("RIGHT")<300?speed2:speed1,this.scaleX=1):this.v.x*=.9,0==this.v.y&&Keyboard.getIsDown("UP")&&(this.v.y=jumpSpeed,this.angle=0),0==this.v.y&&Keyboard.getIsDown("SPACE")?(this.playAction("attack"),this.idleTime=0):0!=this.v.y?(this.playAction("jump2"),this.idleTime=0):Math.abs(this.v.x)==speed1?this.playAction("run1"):Math.abs(this.v.x)==speed2?this.playAction("run2"):this.v.x<speed1&&this.playAction("idle")},Player.prototype.playAction=function(t){"idle"==t?(this.idleTime++,this.idleTime>IDLE_TIME?(this.idleTime>IDLE_TIME+100&&(this.idleAction=idleActions[Math.floor(Math.random()*idleActions.length)],this.idleTime=IDLE_TIME+1),this.play(this.idleAction)):this.play("stand2")):(this.idleTime=0,this.play(t))},Player.prototype.checkMap=function(t){if(t&&this.v.y>=0){this.angle=0;var i=t.mapData[this.pos.x>>0];if(i)for(var s=0,y=i.length;y>s;s++){var x=i[s];if(x.y<=this.pos.y+2&&x.y>=this.pos.y-5){this.pos.y=x.y,this.v.y=0,this.angle=x.ang;break}}}var i=t.wallData[this.pos.y-this.height>>0];if(t&&this.v.x>0){if(i)for(var s=0,y=i.length;y>s;s++){var e=i[s];if(e<=this.pos.x+.5*this.width&&e>=this.pos.x+.5*this.width-5)return this.pos.x=e-.5*this.width,this.v.x=0,void 0}}else if(t&&this.v.x<0&&i)for(var s=0,y=i.length;y>s;s++){var e=i[s];if(e<=this.pos.x-.5*this.width+5&&e>=this.pos.x-.5*this.width)return this.pos.x=e+.5*this.width,this.v.x=0,void 0}var i=t.wallData[this.pos.y>>0];if(t&&this.v.x>0){if(i)for(var s=0,y=i.length;y>s;s++){var e=i[s];if(e<=this.pos.x+.5*this.width&&e>=this.pos.x+.5*this.width-5)return this.pos.x=e-.5*this.width,this.v.x=0,void 0}}else if(t&&this.v.x<0&&i)for(var s=0,y=i.length;y>s;s++){var e=i[s];if(e<=this.pos.x-.5*this.width+5&&e>=this.pos.x-.5*this.width)return this.pos.x=e+.5*this.width,this.v.x=0,void 0}},Player.prototype.die=function(){this.alive=!1;var t=this;setTimeout(function(){t.alive=!0,t.alpha=1},2e3)},Player.prototype.checkFloors=function(t){if(this.v.y>=0)for(var i=0,s=t.length;s>i;i++){var y=t[i];if(this.bounds.left<y.x+y.width&&this.bounds.right>y.x&&y.pos.y<=this.pos.y+2&&y.pos.y>=this.pos.y-5)return this.pos.y=y.pos.y,this.v.y=0,this.floorV=y.v.x,void 0}this.floorV=0},Player.prototype.checkSprings=function(t){if(this.v.y>0)for(var i=0,s=t.length;s>i;i++){var y=t[i];if(!y.isJump&&this.bounds.left<y.x+y.width&&this.bounds.right>y.x&&y.pos.y-y.height<=this.pos.y+2&&y.pos.y-y.height>=this.pos.y-5)return y.jump(this),this.spring=y,void 0}},Player.prototype.update=function(){this.bounds=this.getBounds(),this.v.plus(this.a),this.v.y>maxSpeed&&(this.v.y=maxSpeed),this.v.x>speed2&&(this.v.x=speed2),this.v.x<-1*speed2&&(this.v.x=-1*speed2),this.pos.plus(this.v),this.pos.x+=this.floorV,this.a.x*=.9,this.checkMap(ns.map),this.checkFloors(ns.floors),this.checkSprings(ns.springs),this.x=this.pos.x+ns.map.x,this.y=this.pos.y+ns.map.y,this.keyAction(),this.alive||(this.time++,this.alpha=this.time%10>5?1:0)},Player.create=function(t,i){var s=new Player;return s.init(),s.play("play1"),s.pos.set(t,i),s},function(win){var ns=FL.ns("billd");eval(FL.import("FL","Utils, MovieClip"));var speed=2,YellowBall=ns.YellowBall=function(){MovieClip.apply(this,arguments),this.pos=new Vector,this.v=new Vector(speed,0),this.a=new Vector(0,.2),this.alive=!0,this.onGround=!1};Utils.extends(YellowBall,MovieClip),YellowBall.prototype.init=function(){this.addAnimation("stand",[0,1],!0,2),this.time=0,this.setImg(R.images.yellow_ball,11,11),this.originX=this.width>>1,this.originY=this.height},YellowBall.prototype.doSth=function(){var t=Math.random();.005>t&&(this.v.x*=-1),.01>t&&(this.v.y=-5,this.onGround=!1)},YellowBall.prototype.update=function(){if(this.x=this.pos.x+ns.map.x,this.y=this.pos.y+ns.map.y,this.isInStage&&(this.bounds=this.getBounds(),this.time+=this.timeStep,this.v.plus(this.a),this.v.y>5&&(this.v.y=5),this.pos.plus(this.v),this.a.x=0,ns.map)){if(this.v.y>0)for(var t=0,i=ns.map.lines,s=i.length;s>t;t++){var y=i[t].getY(this.pos.x);if(y&&y<=this.pos.y+2&&y>=this.pos.y-5){this.pos.y=y,this.v.y=0,this.angle=i[t].getAngle(),this.a.x=.07*Math.sin(this.angle)*(Math.cos(this.angle)>0?1:-1),this.onGround=!0;break}}ns.map&&this.v.y>0&&this.onGround&&(this.onGround=!1,this.pos.minus(this.v),this.v.x*=-1,this.v.y=0),this.pos.x<this.width&&(this.pos.x=this.width,this.v.x=speed),this.pos.x>ns.map.width-this.width&&(this.pos.x=ns.map.width-this.width,this.v.x=-1*speed),this.doSth()}},YellowBall.create=function(t,i){var s=new YellowBall;return s.init(),s.play("stand"),s.pos.set(t||0,i||0),s}}(window),function(win){var ns=FL.ns("billd");eval(FL.import("FL","Utils, MovieClip"));var speed=.5,Snail=ns.Snail=function(){MovieClip.apply(this,arguments),this.alive=!0,this.pos=new Vector,this.v=new Vector(speed,0),this.a=new Vector(0,.2)};Utils.extends(Snail,MovieClip),Snail.prototype.init=function(){this.addAnimation("stand",[0,0,1],!0,1),this.time=0,this.setImg(R.images.snail,32,16),this.originX=this.width>>1,this.originY=this.height},Snail.prototype.doSth=function(){var t=Math.random();this.scaleX=this.v.x>0?1:-1,.002>t&&(this.v.x*=-1),.01>t&&(this.v.y=-.1)},Snail.prototype.checkMap=function(t){if(t&&this.v.y>0){var i=t.mapData[this.x-t.x>>0];if(i)for(var s=0,y=i.length;y>s;s++){var x=i[s];if(x.y<=this.pos.y+2&&x.y>=this.pos.y-5){this.pos.y=x.y,this.v.y=0,this.angle=x.ang,this.a.x=.07*Math.sin(this.angle)*(Math.cos(this.angle)>0?1:-1);break}}}},Snail.prototype.update=function(){this.time+=this.timeStep,this.v.plus(this.a),this.v.y>5&&(this.v.y=5),this.pos.plus(this.v),this.a.x=0,this.alive&&this.checkMap(ns.map),this.pos.x<this.width&&(this.pos.x=this.width,this.v.x=speed),this.pos.x>ns.map.width-this.width&&(this.pos.x=ns.map.width-this.width,this.v.x=-1*speed),this.x=this.pos.x+ns.map.x,this.y=this.pos.y+ns.map.y,this.alive&&this.doSth()},Snail.create=function(t,i){var s=new Snail;return s.init(),s.play("stand"),s.pos.set(t||0,i||0),s.update(),s}}(window),function(win){var ns=FL.ns("billd");eval(FL.import("FL","Utils, MovieClip"));var speed=1.5,Spider=ns.Spider=function(){MovieClip.apply(this,arguments),this.alive=!0,this.pos=new Vector,this.v=new Vector(speed,0),this.a=new Vector(0,.2),this.onGround=!1};Utils.extends(Spider,MovieClip),Spider.prototype.init=function(){this.addAnimation("stand","0-9",!0,6),this.time=0,this.setImg(R.images.spider,41,24),this.originX=this.width>>1,this.originY=this.height-5},Spider.prototype.doSth=function(){var t=Math.random();this.scaleX=this.v.x>0?1:-1,.002>t&&(this.v.x=-1*speed)},Spider.prototype.checkMap=function(t){if(t&&this.v.y>0){var i=t.mapData[this.x-t.x>>0];if(i)for(var s=0,y=i.length;y>s;s++){var x=i[s];if(x.y<=this.pos.y+2&&x.y>=this.pos.y-5){this.pos.y=x.y,this.v.y=0,this.angle=x.ang,this.a.x=.07*Math.sin(this.angle)*(Math.cos(this.angle)>0?1:-1),this.onGround=!0;break}}}t&&this.v.y>0&&this.onGround&&(this.onGround=!1,this.pos.minus(this.v),this.v.x*=-1,this.v.y=0)},Spider.prototype.attack=function(){this.scaleX=this.scaleY=1.4;var t=this;setTimeout(function(){t.scaleX=t.scaleY=1},300)},Spider.prototype.update=function(){this.x=this.pos.x+ns.map.x,this.y=this.pos.y+ns.map.y,this.isInStage&&(this.bounds=this.getBounds(),this.time+=this.timeStep,this.v.plus(this.a),this.v.y>5&&(this.v.y=5),this.pos.plus(this.v),this.a.x=0,this.alive&&this.checkMap(ns.map),this.pos.x<this.width&&(this.pos.x=this.width,this.v.x=speed),this.pos.x>ns.map.width-this.width&&(this.pos.x=ns.map.width-this.width,this.v.x=-1*speed),this.alive&&this.doSth())},Spider.create=function(t,i){var s=new Spider;return s.init(),s.play("stand"),s.pos.set(t||0,i||0),s.update(),s}}(window),function(win){var ns=FL.ns("billd");eval(FL.import("FL","Utils, MovieClip"));var speed=7,Fish=ns.Fish=function(){MovieClip.apply(this,arguments),this.alive=!0,this.pos=new Vector,this.v=new Vector(0,0),this.a=new Vector(0,.1)};Utils.extends(Fish,MovieClip),Fish.prototype.init=function(){this.addAnimation("move",[0,1,2,3],!0,4),this.time=0,this.setImg(R.images.fish,32,42),this.originX=0,this.originY=this.height>>1},Fish.prototype.update=function(){this.time+=this.timeStep,this.v.plus(this.a),this.pos.plus(this.v),this.pos.y>ns.map.height+this.height&&(this.v.y=-speed);var t=.8;this.scaleY=this.v.y>0?-t:t,this.scaleX=t,this.x=this.pos.x+ns.map.x,this.y=this.pos.y+ns.map.y},Fish.create=function(t,i){var s=new Fish;return s.init(),s.play("move"),s.pos.set(t||0,i||0),s.update(),s}}(window),function(win){var ns=FL.ns("billd");eval(FL.import("FL","Utils, MovieClip"));var speed=7,Bat=ns.Bat=function(){MovieClip.apply(this,arguments),this.alive=!0,this.pos=new Vector,this.v=new Vector(1,0),this.a=new Vector(0,0)};Utils.extends(Bat,MovieClip),Bat.prototype.init=function(){this.addAnimation("move",[0,1,2,3],!0,4),this.setImg(R.images.bat,71,48),this.setCenter(),this.time=0,this.state="move"},Bat.prototype.update=function(){if(this.target){if("move"==this.state){this.a=this.target.pos.minusNew(this.pos);var t=this.a.getLength();t=0==t?.001:t,this.a.setLength(50/t),this.a.rotate(.2),Math.random()<.01&&this.v.rotate(.1),10>t&&(this.state="idle",this.a.set(0,-.1),this.v.y=-1,this.v.x*=2)}else"idle"==this.state&&Math.abs(this.target.pos.x-this.pos.x)>300&&Math.random()<.01&&(this.state="move",this.a.set(0,0),this.v.set(0,0));this.v.plus(this.a),this.v.cut(5),this.pos.plus(this.v),this.scaleX=this.v.x>0?1:-1,this.x=this.pos.x+ns.map.x,this.y=this.pos.y+ns.map.y}},Bat.create=function(){var t=new Bat;return t}}(window),function(win){var ns=FL.ns("billd");eval(FL.import("FL","Utils, Bitmap"));var DOWN_SPEED=-.1,UP_SPEED=.1,BACK_SPEED=-.05,Spring=ns.Spring=function(t,i){Bitmap.call(this,t,i),this.pos=new Vector(t,i),this.isJump=!1};Utils.extends(Spring,Bitmap),Spring.prototype.jump=function(t){this.isJump=!0,this.vy=DOWN_SPEED,this.target=t},Spring.prototype.update=function(){this.isJump&&(this.scaleY+=this.vy,this.vy==DOWN_SPEED&&this.scaleY<.3&&(this.vy=UP_SPEED),this.vy==UP_SPEED&&this.scaleY>1.5&&(this.vy=BACK_SPEED,this.target.v.y=-13,this.target=null),this.vy==BACK_SPEED&&this.scaleY<1&&(this.scaleY=1,this.isJump=!1),this.target&&(this.target.v.y=0,this.target.pos.y=this.pos.y-this.height*this.scaleY)),this.x=this.pos.x+ns.map.x,this.y=this.pos.y+ns.map.y},Spring.create=function(t,i){var s=new Spring(t,i);return s.setImg(R.images.spring),s.originY=s.height,s}}(window),function(win){function draw(t,i){for(var s in i)arr=i[s],t.save(),"bezier"==s?(t.fillStyle="#000000",t.strokeStyle="#9966ff",arr.forEach(function(i){t.beginPath();var s=i.shift();t.moveTo(s[0].x,s[0].y),t.quadraticCurveTo(s[1].x,s[1].y,s[2].x,s[2].y),i.forEach(function(i){t.quadraticCurveTo(i[1].x,i[1].y,i[2].x,i[2].y)}),t.fill()})):"rect"==s&&arr.forEach(function(i){t.fillStyle=i.color,t.fillRect(i.x,i.y,i.width,i.height)}),t.restore()}function drawDebug(t,i){t.beginPath(),t.strokeStyle="#ff0000",t.lineWidth=2,i.forEach(function(i){t.moveTo(i.p0.x,i.p0.y),t.lineTo(i.p1.x,i.p1.y)}),t.stroke(),t.fill()}function getLinesByBezier(t){for(var i=t.getPointsByTime(.01),s=[],y=1,x=i.length;x>y;y++)s.push(new Line(i[y-1],i[y]));return s}function createMapData(t){for(var i={},s={},y=0,x=t.length;x>y;y++){var e=t[y];if(e.p0.x>>0==e.p1.x>>0)for(var h=Math.min(e.p0.y,e.p1.y)>>0,a=Math.max(e.p0.y,e.p1.y)>>0,o=h;a>=o;o++)s[o]=s[o]||[],s[o].push(e.p0.x);else for(var n=e.createPoints(),o=0,p=n.length;p>o;o++)point=n[o],i[point.x]=i[point.x]||[],Math.abs(point.ang)>.5*Math.PI&&(point.ang+=Math.PI),i[point.x].push({y:point.y,ang:point.ang})
}return log(s),{wall:s,ground:i}}var ns=FL.ns("billd");eval(FL.import("FL","Bitmap, Utils, Bezier, Line"));var Map=ns.Map=function(t,i){Bitmap.call(this,t,i),this.mapData={},this.lines=[]};Utils.extends(Map,Bitmap),Map.prototype.init=function(t,i){this.img=document.createElement("canvas"),this.ctx=this.img.getContext("2d"),this.img.width=t,this.img.height=i,this.setImg(this.img),this.lines=[];for(var s=mapData.hit,y=0,x=s.beziers.length;x>y;y++){var e=s.beziers[y];this.lines=this.lines.concat(getLinesByBezier(new Bezier(e[0],e[1],e[2],e[3])))}for(var y=0,x=s.lines.length;x>y;y++){var e=s.lines[y];this.lines.push(new Line(new Vector(e[0].x,e[0].y),new Vector(e[1].x,e[1].y)))}draw(this.ctx,mapData.shape),FL.getUrlParams().hit&&drawDebug(this.ctx,this.lines);var h=createMapData(this.lines);this.mapData=h.ground,this.wallData=h.wall}}(window),function(win){var ns=FL.ns("billd");eval(FL.import("ns","Spring, Spider, YellowBall, Floor, Fish")),eval(FL.import("FL","Bitmap"));var InstanceFactory=ns.InstanceFactory={create:function(t,i){var s;switch(t){case"spring":s=Spring.create(i.x,i.y),ns.springs.push(s);break;case"spider":s=Spider.create(i.x,i.y),ns.spiders.push(s);break;case"yellow_ball":s=YellowBall.create(i.x,i.y);break;case"floor":s=new Floor(i),ns.floors.push(s);break;case"fish":s=Fish.create(i.x,i.y),ns.fishs.push(s);break;case"star":s=new FL.Bitmap(i.x,i.y,R.images.star),s.pos=new Vector(i.x,i.y),s.originX=s.originY=0,s.update=function(){if(this.x=ns.map.x+this.pos.x,this.y=ns.map.y+this.pos.y,ns.player.hitTestObject(this)){this.update=null;var t=this;TweenLite.to(this,1,{angle:11,scaleX:0,scaleY:0,x:578,y:12,onComplete:function(){ns.score+=10,t.parent.removeChild(t)}})}};break;default:s=null}return s}}}(window),function(){function init(){map=ns.map=new Map,player=ns.player=Player.create(),map.init(mapData.map.width,mapData.map.height),camera=new Camera(0,0,width,height),map.y=-474.95,player.pos.x=mapData.mc.player[0].x,player.pos.y=mapData.mc.player[0].y,player.y=player.pos.y+map.y,stage.update=update,bg=new FL.Bitmap,bg.setImg(R.images.bg),bgSX=(bg.width-width)/(map.width-width),bgSY=(bg.height-height)/(map.height-height),bg.update=function(){bg.x=map.x*bgSX,bg.y=map.y*bgSY},stage.addChild(bg),stage.addChild(map),stage.addChild(player),mapData.mc.floor=mapData.floor;for(var t in mapData.mc)for(var i=mapData.mc[t]||[],s=0,y=i.length;y>s;s++){var x=InstanceFactory.create(t,i[s]);x&&stage.addChild(x)}}function update(){player.x>=Math.floor(.6*width)&&map.x>width-map.width?map.x=.6*width-player.pos.x:player.x<=.4*width&&map.x<0&&(map.x=.4*width-player.pos.x),player.y<=Math.ceil(.3*height)?map.y=.3*height-player.pos.y:player.y>=Math.floor(.7*height)&&map.y>height-map.height&&(map.y=.7*height-player.pos.y),player.pos.y>map.height&&!isShake&&(FL.Shake.shake(stage,.5,.03,"xy"),isShake=!0,setTimeout(function(){isShake=!1,map.y=200,map.x=0,player.die(),player.pos.x=player.x=mapData.mc.player[0].x,player.pos.y=player.y=mapData.mc.player[0].y},1e3)),player.pos.x<.5*player.width&&(player.pos.x=.5*player.width),player.pos.x>map.width-.5*player.width&&(player.pos.x=map.width-.5*player.width);for(var t=0,i=spiders.length;i>t;t++){var s=spiders[t];if(s.alive&&s.isInStage&&player.hitTestObject(s)){player.v.y>0?(player.v.y=-5,s.v.y=-4,s.v.x=0,s.scaleX=1,s.setCenter(),spiders.splice(spiders.indexOf(s),1),TweenLite.to(s,2,{scaleX:.8,scaleY:.8,angle:10,onComplete:function(){stage.removeChild(s)}}),s.alive=!1,ns.score+=5):player.alive&&(player.die(),s.attack(),player.v.set(0,0),player.a.x=s.pos.x>player.pos.x?-3:3,s.v.x*=(s.pos.x-player.pos.x)*s.v.x<0?1:-1,life--,FL.Shake.shake(stage,.5,.02,"xy"));break}}for(var t=0,i=fishs.length;i>t;t++){var y=fishs[t];if(player.hitTestObject(y)&&player.alive){player.die(),player.v.y=-4,player.a.x=player.v.x>0?-3:3,FL.Shake.shake(stage,.5,.02,"xy");break}}document.getElementById("life").innerHTML="life:"+life,document.getElementById("score").innerHTML="score:"+ns.score}var ns=FL.ns("billd");eval(FL.import("ns","Player, Map, YellowBall, Spider, Fish, Floor, Bat, Spring, InstanceFactory")),eval(FL.import("FL","Stage, LoadProgress, ImageLoader, Camera"));var canvas=document.querySelector("canvas"),width=600,height=300,fps=60,mc,life=99;ns.score=0;var stage=new Stage(canvas,width,height,fps);stage.start();var isShake=!1,loadProgress=new LoadProgress(new ImageLoader);loadProgress.x=width>>1,loadProgress.y=height>>1,loadProgress.addEventListener("complete",function(){stage.removeChild(this),this.removeAllEventListener("complete",arguments.callee),loadProgress=null,R.images=this.loader.images,init()}),loadProgress.load(R.images),stage.addChild(loadProgress),stage.initKeyboardEvent();var map,player,camera,spiders=ns.spiders=[],fishs=ns.fishs=[],floors=ns.floors=[],springs=ns.springs=[];setInterval(function(){stage.render()},1e3/fps)}();
//# sourceMappingURL=game.min.js.map