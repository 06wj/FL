!function(t){var i=t.FL={};try{t.log=function(){console.log.apply(console,arguments)}}catch(i){t.log=function(){console.dir(arguments)}}t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,i.merge=function(t,i){for(var e in i)t[e]=i[e];return t},i.getUrlParams=function(){var t={},i=window.location.href,e=i.indexOf("?");if(e>0)for(var s,h,n=i.substring(e+1),o=n.split("&"),r=0;s=o[r];r++)h=o[r]=s.split("="),t[h[0]]=h.length>1?h[1]:!0;return t},i.ns=function(i){for(var e=i.split("."),s=t,h=0,n=e.length;n>h;h++)s[e[h]]=s[e[h]]||{},s=s[e[h]];return s},i.import=function(t,i){var e="";return i.replace(/\s/g,"").split(",").forEach(function(i){e+="var "+i+"="+t+"."+i+";"}),e},i.params=i.getUrlParams(),i.debug=i.params.debug&&0!=i.params.debug}(window),function(){var t=FL.Utils={};t.extends=function(t,i){t.prototype=Object.create(i.prototype),t.prototype.superClass=i.prototype,t.prototype.constructor=t},t.getElementOffset=function(t){for(var i=t.offsetLeft,e=t.offsetTop;(t=t.offsetParent)&&t!=document.body&&t!=document;)i+=t.offsetLeft,e+=t.offsetTop;return{x:i,y:e}},t.merge=function(t,i){for(var e in i)t[e]=i[e];return t},t.getUrlParams=function(){var t={},i=window.location.href,e=i.indexOf("?");if(e>0)for(var s,h,n=i.substring(e+1),o=n.split("&"),r=0;s=o[r];r++)h=o[r]=s.split("="),t[h[0]]=h.length>1?h[1]:!0;return t},t.getRandom=function(t,i,e){t>i&&(t=i+t,i=t-i,t-=i);var s=Math.random()*(i-t)+t;return e?s>>0:s}}(),function(t){var i=t.Vector=function(t,i){this.x=t||0,this.y=i||0};i.prototype.set=function(t,i){this.x=t,this.y=i},i.prototype.getClone=function(){return new i(this.x,this.y)},i.prototype.cut=function(t){var i=Math.min(t,this.getLength());this.setLength(i)},i.prototype.cutNew=function(t){var i=Math.min(t,this.getLength()),e=this.getClone();return e.setLength(i),e},i.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},i.prototype.plus=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.plusNew=function(t){return new i(this.x+t.x,this.y+t.y)},i.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.minusNew=function(t){return new i(this.x-t.x,this.y-t.y)},i.prototype.negate=function(){this.x=-this.x,this.y=-this.y},i.prototype.negateNew=function(){return new i(-this.x,-this.y)},i.prototype.scale=function(t){this.x*=t,this.y*=t},i.prototype.scaleNew=function(t){return new i(this.x*t,this.y*t)},i.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.setLength=function(t){var i=this.getLength();i?this.scale(t/i):this.x=t},i.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},i.prototype.setAngle=function(t){var i=this.getLength();this.x=i*Math.cos(t),this.y=i*Math.sin(t)},i.prototype.rotate=function(){var t,i,e=arguments;1==e.length?(t=Math.cos(e[0]),i=Math.sin(e[0])):(t=e[0],i=e[1]);var s=this.x*t-this.y*i,h=this.x*i+this.y*t;this.x=s,this.y=h},i.prototype.rotateNew=function(t){var e=new i(this.x,this.y);return e.rotate(t),e},i.prototype.cross=function(t){return this.x*t.y-t.x*this.y},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.getNormal=function(){return new i(-this.y,this.x)},i.prototype.isPerpTo=function(t){return 0==this.dot(t)},i.prototype.angleBetween=function(t){var i=this.dot(t),e=i/(this.getLength()*t.getLength());return Math.acos(e)},i.prototype.getLength2=function(){return this.x*this.x+this.y*this.y}}(window),function(){var t=FL.Rect=function(t,i,e,s){this.set(t,i,e,s)};t.prototype.set=function(t,i,e,s){this.left=this.x=t||0,this.top=this.y=i||0,this.width=e||this.width||0,this.height=s||this.height||0,this.right=this.x+this.width,this.bottom=this.y+this.height},t.prototype.intersects=function(t){return t.x<=this.right&&this.x<=t.right&&t.y<=this.bottom&&this.y<=t.bottom},t.prototype.hitTestPoint=function(t,i){return t>=this.x&&t<=this.right&&i>=this.y&&i<=this.bottom}}(),function(){function t(t){var s=e(t.p0.x,t.p1.x),n=e(t.p0.y,t.p1.y),o=t.p0.x-t.p1.x,r=t.p0.y-t.p1.y;return new i(s,n,h(o),h(r))}var i=FL.Rect,e=Math.min,s=Math.max,h=Math.abs,n=FL.Line=function(t,i){this.p0=t||new Vector,this.p1=i||new Vector};n.prototype.getPoint=function(t){var i=(this.p1.x-this.p0.x)*t+this.p0.x,e=(this.p1.y-this.p0.y)*t+this.p0.y;return new Vector(i,e)},n.prototype.getAngle=function(){var t=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y;return Math.atan2(i,t)},n.prototype.getY=function(t){return this.lx=this.lx||e(this.p0.x,this.p1.x),this.rx=this.rx||s(this.p0.x,this.p1.x),t<this.lx||t>this.rx?null:(this._getY=this._getY||function(t){var i=this.p0.x,e=this.p0.y,s=this.p1.x,h=this.p1.y;return i==s?Math.min(e,h):e==h?e:(t-i)/(s-i)*(h-e)+e},this._getY(t))},n.prototype.createPoints=function(){var t=[];this.lx=this.lx||e(this.p0.x,this.p1.x),this.rx=this.rx||s(this.p0.x,this.p1.x);for(var i=this.getAngle(),h=this.lx>>0;h<=this.rx;h++)null!=this.getY(h)&&t.push({x:h,y:this.getY(h),ang:i});return t},n.prototype.hitTestPoint=function(i,e){var s=new Vector(i,e);return s.minus(this.p0),0==s.cross(this.p1.minusNew(this.p0))&&t(this).hitTestPoint(s.x,s.y)},n.prototype.intersects=function(i){if(t(i).intersects(t(this))){var e=this.p0,s=this.p1,h=i.p0,n=i.p1,o=s.minusNew(e),r=n.minusNew(h);return h.minusNew(e).cross(o)*o.cross(n.minusNew(e))>=0&&e.minusNew(h).cross(r)*r.cross(s.minusNew(h))>=0}return!1}}(),function(){var t=FL.Line,i=FL.Polygon=function(t){this.points=t};i.prototype.hitTestPoint=function(i,e){for(var s=new t(new Vector(i,e),new Vector(-1e3,e)),h=0,n=this.points,o=0,r=n.length;r>o;o++){var a=new t(n[o],n[(o+1)%r]);if(a.hitTestPoint(i,e))return!0;a.p0.x!=a.p1.x&&(s.hitTestPoint(a.p0)?h++:!s.hitTestPoint(a.p1)&&s.intersects(a)&&h++)}return h%2==1}}(),function(){var t=100,i=FL.Point=function(t,i){this.x=t,this.y=i},e=FL.Bezier=function(){var t=arguments;4==t.length?(this.p0=t[0],this.p1=t[1],this.p2=t[2],this.p3=t[3]):8==t.length&&(this.p0=new i(t[0],t[1]),this.p1=new i(t[2],t[3]),this.p2=new i(t[4],t[5]),this.p3=new i(t[6],t[7]))};e.prototype.getSpeedLength=function(t){var i=1-t,e=i*i,s=t*t,h=-3*this.p0.x*e+3*this.p1.x*e-6*this.p1.x*i*t+6*this.p2.x*i*t-3*this.p2.x*s+3*this.p3.x*s,n=-3*this.p0.y*e+3*this.p1.y*e-6*this.p1.y*i*t+6*this.p2.y*i*t-3*this.p2.y*s+3*this.p3.y*s;return Math.sqrt(h*h+n*n)},e.prototype.getLength=function(i){var e,s=parseInt(t*i);if(1&s&&s++,0==s)return 0;var h=s>>1,n=0,o=0,r=i/s;for(e=0;h>e;e++)n+=this.getSpeedLength((2*e+1)*r);for(e=1;h>e;e++)o+=this.getSpeedLength(2*e*r);return(this.getSpeedLength(0)+this.getSpeedLength(1)+2*o+4*n)*r/3},e.prototype.getPointByTime=function(t){var i=1-t,e=i*i,s=e*i,h=t*t,n=h*t;return new Vector(s*this.p0.x+3*e*t*this.p1.x+3*i*h*this.p2.x+n*this.p3.x,s*this.p0.y+3*e*t*this.p1.y+3*i*h*this.p2.y+n*this.p3.y)},e.prototype.getPointByLen=function(t){if(t>this.length)return this.p3;for(var i,e=t/this.length;;){if(i=e-(this.getLength(e)-t)/this.getSpeedLength(e),Math.abs(e-i)<.01)break;e=i}return this.getPointByTime(i)},e.prototype.getPointsByLen=function(t){t=t||1;for(var i=this.getLength(),e=0,s=[];i>e;)s.push(this.getPointByLen(e)),e+=t;return s.push(this.getPointByLen(i)),s},e.prototype.getPointsByTime=function(t){t=t||.01;for(var i=0,e=[];1>i;)e.push(this.getPointByTime(i)),i+=t;return e.push(this.getPointByTime(1)),e}}(),function(){var t=FL.EventDispatcher=function(){this.eventListeners={}};t.prototype.addEventListener=function(t,i){this.eventListeners[t]||(this.eventListeners[t]=[]),-1==this.eventListeners[t].indexOf(i)&&this.eventListeners[t].push(i)},t.prototype.removeEventListener=function(t,i){if(this.eventListeners[t]){var e=this.eventListeners[t].indexOf(i);-1!=e&&this.eventListeners[t].splice(e,1)}},t.prototype.removeAllEventListener=function(){this.eventListeners={}},t.prototype.dispatchEvent=function(t){var i=this.eventListeners[t.type];if(t.target=this,i&&i.length>0){i=i.slice(0);for(var e=0,s=i.length;s>e;e++)i[e].call(this,t)}}}(),function(){var t=FL.Utils,i=FL.EventDispatcher,e=FL.ImageLoader=function(){i.call(this),this.init()};t.extends(e,i),e.prototype.init=function(){this.images={},this.totalSize=0,this.loadSize=0},e.prototype.load=function(t){var i=this;this.init();for(var e=this.images,s=0,h=t.length;h>s;s++){var n=new Image;n.onload=function(t){i._onCompleteHander(t)},this.totalSize+=t[s].size,e[t[s].id]=n,n.size=t[s].size,n.src=t[s].src,n.id=t[s].id}},e.prototype._onCompleteHander=function(t){this.loadSize+=t.target.size,this.dispatchEvent(this.loadSize-this.totalSize>-.1?{type:"complete"}:{type:"progress"}),log("load:"+t.target.id+",  "+Math.floor(this.loadSize)+"/"+Math.floor(this.totalSize))}}(),function(){{var t=FL.Utils;FL.Mouse={stage:null,x:0,y:0,init:function(i){this.stage=i,this.element=document,this.x=0,this.y=0,this.isDown=!1;var e=t.getElementOffset(this.element);this.offsetX=e.x,this.offsetY=e.y,this.addEvent()},addEvent:function(){var t=this.element,i=["mousedown","mousemove","mouseup"],e="ontouchstart"in window?["touchstart","touchmove","touchend"]:i,s=this;e.forEach(function(i,e){t.addEventListener(i,function(t){t.preventDefault(),0==e?s.isDown=!0:2==e&&(s.isDown=!1);var h=t.changedTouches?t.changedTouches[0].pageX:t.pageX,n=t.changedTouches?t.changedTouches[0].pageY:t.pageY;s.x=h-s.offsetX,s.y=n-s.offsetY,s.stage.dispatchEvent({type:i,x:s.x,y:s.y})})})}}}}(),function(){var t=(FL.Utils,FL.Keyboard={init:function(){this.elem=document,this.key={},this.time={},this.delay={},this.addEvent()},addEvent:function(){var t=this.elem,i=this.key,e=this.time,s=this.delay,h=this;t.addEventListener("keydown",function(t){t.preventDefault(),i[t.keyCode]!==!0&&(i[t.keyCode]=!0,s[t.keyCode]=new Date-e[t.keyCode],e[t.keyCode]=new Date,h.keyDown())}),t.addEventListener("keyup",function(t){t.preventDefault(),i[t.keyCode]=!1,h.keyUp()})},getIsDown:function(i){return this.key[t[i]]},getKeyDelay:function(i){return this.delay[t[i]]},keyDown:function(){},keyUp:function(){}},{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123})}(),function(){var t=FL.Utils,i=FL.EventDispatcher,e=FL.Rect,s=FL.Polygon,h=FL.DisplayObject=function(t){this.x=0,this.y=0,this.originX=0,this.originY=0,this.scaleX=1,this.scaleY=1,this.width=0,this.height=0,this.angle=0,this.alpha=1,this.timeStep=0,this.mouseEnable=!1,this.visible=!0,this.rect=new e,i.call(this),FL.merge(this,t)};t.extends(h,i),h.prototype.render=function(t){this.isInStage=this._inStage(),this.visible&&t&&this.isInStage&&(t.save(),t.globalAlpha=this.alpha,t.translate(this.x,this.y),t.rotate(this.angle),t.scale(this.scaleX,this.scaleY),this._draw(t),t.restore(),FL.debug&&this._debugDraw(t))},h.prototype._debugDraw=function(t){t.save();var i=this.getBounds();t.strokeStyle="#f00",t.lineWidth=.5,t.beginPath(),t.moveTo(this.hitPoints[0].x,this.hitPoints[0].y);for(var e=1,s=this.hitPoints.length;s>e;e++)t.lineTo(this.hitPoints[e].x,this.hitPoints[e].y);t.closePath(),t.stroke(),t.strokeStyle="#00f",t.beginPath(),t.strokeRect(i.x,i.y,i.width,i.height),t.stroke(),t.restore()},h.prototype.setCenter=function(){this.originX=this.width>>1,this.originY=this.height>>1},h.prototype._draw=function(){},h.prototype.initStage=function(t,i){this.stage=t,this.timeStep=i},h.prototype._inStage=function(){return this.stage&&this.x+2*this.width>0&&this.y+2*this.height>0&&this.x-2*this.width<this.stage.width&&this.y-2*this.height<this.stage.height},h.prototype.getBounds=function(){for(var t,i,s,h,n=Math.abs(this.scaleX),o=Math.abs(this.scaleY),r=Math.cos(this.angle),a=Math.sin(this.angle),p=this.originX*n,c=this.originY*o,u=[[0,0],[0,this.height*o],[this.width*n,this.height*o],[this.width*n,0]],l=3;l>=0;l--){var g=u[l][0]-p,d=u[l][1]-c,f=g*r-d*a+this.x,y=g*a+d*r+this.y;u[l]=new Vector(f,y),3==l?(t=s=f,i=h=y):(t>f&&(t=f),i>y&&(i=y),f>s&&(s=f),y>h&&(h=y))}return this.hitPoints=u,new e(t,i,s-t,h-i)},h.prototype.getConcatenatedMatrix=function(t){var i=new FL.Matrix(1,0,0,1,0,0);if(t==this)return i;for(var e=this;null!=e.parent&&e.parent!=t;e=e.parent){var s=1,h=0;if(e.rotation%360!=0){var n=e.rotation*DEG_TO_RAD;s=Math.cos(n),h=Math.sin(n)}0!=e.regX&&(i.tx-=e.regX),0!=e.regY&&(i.ty-=e.regY),i.concat(new FL.Matrix(s*e.scaleX,h*e.scaleX,-h*e.scaleY,s*e.scaleY,e.x,e.y))}return i},h.prototype.hitTestPoint=function(t,i){if(0==this.angle){var h=Math.abs(this.scaleX),n=Math.abs(this.scaleY);return new e(this.x-this.originX*h,this.y-this.originY*n,this.width*h,this.height*n).hitTestPoint(t,i)}return this.getBounds().hitTestPoint(t,i)?new s(this.hitPoints).hitTestPoint(t,i):!1},h.prototype.hitTestObject=function(t){var i=this.bounds||this.getBounds();return i.intersects(t.bounds||t.getBounds())?!0:!1}}(),function(){var t=FL.Utils,i=FL.DisplayObject,e=FL.DisplayObjectContainer=function(t){i.call(this,t),this.parent&&this.parent.addChild(this),this.children=[]};t.extends(e,i),e.prototype.addChildAt=function(i,s){if(s="undefined"==s?this.children.length:s,this.removeChild(i),this.children.splice(s,0,i),i.parent=this,this.stage){var h={stage:this.stage,timeStep:this.timeStep};i instanceof e?i.setAll(h):t.merge(i,h)}},e.prototype.addChild=function(){for(var t=this.children.length,i=0,e=arguments.length;e>i;i++)this.addChildAt(arguments[i],t++)},e.prototype.removeChild=function(t){var i="number"==typeof t?t:this.children.indexOf(t);0>i||(this.children[i].parent=null,this.children.splice(i,1))},e.prototype._draw=function(t){for(var i=0,e=this.children.length;e>i;i++)this.children[i].render(t)},e.prototype.setAll=function(i){var s=this.children;t.merge(this,i);for(var h=s.length-1;h>=0;h--){var n=s[h];t.merge(n,i),n instanceof e?n.setAll(i):t.merge(this,i)}},e.prototype.callAll=function(t){this[t]&&this[t]();for(var i=this.children,s=i.length-1;s>=0;s--){var h=i[s];h instanceof e?h.callAll(t):h[t]&&h[t]()}}}(),function(){var t=FL.Utils,i=FL.DisplayObject,e=FL.Rect,s=FL.Bitmap=function(t){i.call(this,t),this.rect=this.rect||new e,this.img&&this.setImg(this.img,t.rect)};t.extends(s,i),s.prototype._draw=function(t){var i=this.rect;this.img&&t.drawImage(this.img,i.x,i.y,i.width,i.height,-this.originX,-this.originY,i.width,i.height)},s.prototype.setRect=function(t,i,e,s){this.rect.set(t,i,e,s),this.width=e,this.height=s},s.prototype.setImg=function(t,i){this.img=t,i?this.setRect(i.x,i.y,i.width,i.height):this.setRect(0,0,t.width,t.height)}}(),function(){var t=FL.Utils,i=FL.Bitmap,e=document.createElement("canvas");e.width=1600,e.height=800;var s=e.getContext("2d"),h=document.createElement("canvas"),n=h.getContext("2d"),o=FL.Canvas=function(t){i.call(this,t),this.cacheCtx=s,this.cacheCanvas=e};t.extends(o,i),o.prototype.setImage=function(t,i){this.rect.width=this.width=h.width=t||200,this.rect.height=this.height=h.height=i||200,n.drawImage(e,0,0),this.img=this.img||new Image,this.img.src=h.toDataURL()}}(),function(){var t=FL.Utils,i=FL.Rect,e=FL.DisplayObjectContainer,s=FL.Sprite=function(t){e.call(this,t),this.rect=this.rect||new i,this.img&&this.setImg(img,t.rect)};t.extends(s,e),s.prototype._draw=function(t){var i=this.rect;this.img&&t.drawImage(this.img,i.x,i.y,i.width,i.height,-this.originX,-this.originY,i.width,i.height)},s.prototype.setRect=function(t,i,e,s){this.rect.set(t,i,e,s),this.width=e,this.height=s},s.prototype.setImg=function(t,i){this.img=t,i?this.setRect(i.x,i.y,i.width,i.height):this.setRect(0,0,t.width,t.height)}}(),function(){var t=FL.Utils,i=FL.Sprite,e=FL.MovieClip=function(t){this._time=0,this.isPlay=!1,this.isLoop=!1,this.frameNum=0,this.totalFrame=0,this.data={},this.action="",this.frames=[],this.setFrameRate(24),i.call(this,t)};t.extends(e,i),e.prototype.play=function(t,i){if(t!=this.action||i){var e=this.data[t];this.action=t,this.frames=e.frames,this.totalFrame=e.frames.length,this.isLoop=e.loop,this.delay=e.delay||this.delay,this.frameNum=0,this._time=0,this._setFrame()}this.isPlay||(this._time=0,this.isPlay=!0)},e.prototype.stop=function(t){t&&this.play(t),this.isPlay=!1},e.prototype.addAnimation=function(t,i,e,s){if("string"==typeof i){var h=i.split(",");i=[];for(var n=0,o=h.length;o>n;n++){var r=h[n].split("-");if(1==r.length)i.push(parseInt(r[0]));else for(var a=parseInt(r[0]),p=parseInt(r[1]);p>=a;a++)i.push(a)}}var c={frames:i,loop:e||!1};s>0&&(c.delay=1e3/s),this.data[t]=c},e.prototype.setFrameRate=function(t){this.frameRate=t||24,this.delay=1e3/this.frameRate},e.prototype._update=function(){this._time+=this.timeStep,this._time>=this.delay&&(this._time=this._time-this.delay,this.frameNum++,this.frameNum>=this.totalFrame&&(this.frameNum=0,this.isLoop||this.stop()),this._setFrame())},e.prototype._draw=function(t){this.img&&t.drawImage(this.img,this.sourceX,this.sourceY,this.width,this.height,-this.originX,-this.originY,this.width,this.height),this.isPlay&&this._update()},e.prototype._setFrame=function(){var t=this.frames[this.frameNum];this.sourceX=t%this.col*this.width,this.sourceY=(t/this.col>>0)*this.height},e.prototype.setImg=function(t,i,e){this.img=t,this.width=i,this.height=e,this.col=this.img.width/this.width>>0,this.row=this.img.height/this.height>>0}}(),function(){var t=FL.DisplayObject,i=FL.Utils,e=FL.LoadProgress=function(i){t.call(this,i),this.width=this.width||400,this.height=this.height||10,this.setCenter(),this.init(i.loader)};i.extends(e,t),e.prototype.init=function(t){this.loader=t;var i=this;t.addEventListener("complete",function(){i.progress=1,t.removeEventListener("complete",arguments.callee),t.removeEventListener("progress",arguments.callee),setTimeout(function(){i.dispatchEvent({type:"complete"})},500)}),t.addEventListener("progress",function(){i.progress=t.loadSize/t.totalSize})},e.prototype.load=function(t){var i=this.loader;i.load(t)},e.prototype._draw=function(t){t.fillStyle="#69f",t.fillRect(-this.originX,-this.originY,this.width,this.height),t.fillStyle="#f69",t.fillRect(-this.originX+2,-this.originY+2,(this.width-4)*this.progress,this.height-4)}}(),function(){function t(t){for(var i=this.children,e=0,s=this.children.length;s>e;e++){var h=i[e];if(h.mouseEnable&&h.hitTestPoint(t.x,t.y))return void h.dispatchEvent(t)}}var i=FL.Utils,e=FL.DisplayObjectContainer,s=FL.Mouse,h=FL.Keyboard,n=FL.Stage=function(t){e.call(this,t),this.width=this.width||550,this.height=this.height||400,this.fps=this.fps||60,this.init()};i.extends(n,e),n.prototype.init=function(){this.stage=this,this.timeStep=1e3/this.fps,this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d")},n.prototype.addChildAt=function(t,i){this.superClass.addChildAt.call(this,t,i)},n.prototype.render=function(){this.ctx.clearRect(0,0,this.width,this.height),this.superClass.render.call(this,this.ctx)},n.prototype.start=function(){var t=this;this.stop(),this._interval=setInterval(function(){t.render(),t.callAll("update")},1e3/this.fps)},n.prototype.update=function(){},n.prototype.initMouseEvent=function(i){s.init(this),i&&(this.addEventListener("mousedown",t),this.addEventListener("mousemove",t),this.addEventListener("mouseup",t))},n.prototype.initKeyboardEvent=function(){h.init()},n.prototype.stop=function(){clearInterval(this._interval)}}(),function(){var t=FL.Rect,i=FL.Camera=function(t,i,e,s,h){this.x=t,this.y=i,this.width=e,this.height=s,this.zoom=h||1,this.scroll=new Vector,this.bounds=null,this.target=null,this.deadzone=null};i.prototype.update=function(){if(null!=this.target)if(null==this.deadzone)this.focusOn(this.target.x+.5*this.target.width,this.target.y+.5*this.target.height);else{var t=this.target.x+(this.target.x>0?1e-7:-1e-7),i=this.target.y+(this.target.y>0?1e-7:-1e-7),e=t-deadzone.x;this.scroll.x>e&&(this.scroll.x=e),e=t+this.target.width-this.deadzone.x-this.deadzone.width,this.scroll.x<e&&(this.scroll.x=e),e=i-this.deadzone.y,this.scroll.y>e&&(this.scroll.y=e),e=i+this.target.height-this.deadzone.y-this.deadzone.height,this.scroll.y<e&&(this.scroll.y=e)}null!=this.bounds&&(this.scroll.x<this.bounds.left&&(this.scroll.x=bounds.left),scroll.x>this.bounds.right-width&&(this.scroll.x=bounds.right-width),scroll.y<this.bounds.top&&(this.scroll.y=bounds.top),scroll.y>this.bounds.bottom-height&&(this.scroll.y=this.bounds.bottom-height))},i.prototype.follow=function(i,e){this.target=i;var s;switch(e){case"platFormer":var h=this.width/8,n=this.height/3;this.deadzone=new t((this.width-h)/2,(this.height-n)/2-.25*n,h,n);break;case"topDown":s=Math.max(this.width,this.height)/4,this.deadzone=new t((this.width-s)/2,(this.height-s)/2,s,s);break;case"topDownTight":s=Math.max(width,height)/8,this.deadzone=new t((this.width-s)/2,(this.height-s)/2,s,s);break;case"direct":default:this.deadzone=null}},i.prototype.focusOn=function(t){this.scroll.set(t.x-.5*this.width,t.y-.5*this.height)},i.prototype.setBounds=function(i,e,s,h){this.bounds=this.bounds||new t,this.bounds.set(i,e,s,h),this.update()}}(),function(){function t(){for(var t=i.length-1;t>=0;t--){var s=i[t],o=e[t];s.duration>0?(s.duration-=h,("xy"==s.direction||"x"==s.direction)&&(o.x=s.x+(Math.random()-.5)*s.intensity*o.width),("xy"==s.direction||"y"==s.direction)&&(o.y=s.y+(Math.random()-.5)*s.intensity*o.height)):n.stop(o)}}var i=[],e=[],s=-1,h=17;s=setInterval(t,h);var n=FL.Shake={shake:function(t,s,h,n){var o=e.indexOf(t);o=-1==o?e.length:o,i[o]={duration:1e3*s||400,intensity:h||.01,direction:n||"xy",x:t.x,y:t.y},e[o]=t},stop:function(t){var s=e.indexOf(t);-1!=s&&(t.x=i[s].x,t.y=i[s].y,i.splice(s,1),e.splice(s,1))}}}();
//# sourceMappingURL=FL.min.js.map