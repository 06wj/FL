!function(t){var i=t.FL={};try{t.log=function(){console.log.apply(console,arguments)}}catch(e){t.log=function(){console.dir(arguments)}}t.DEG_TO_RAD=Math.PI/180,i.getUrlParams=function(){var t={},i=window.location.href,e=i.indexOf("?");if(e>0)for(var s,h,n=i.substring(e+1),o=n.split("&"),r=0;s=o[r];r++)h=o[r]=s.split("="),t[h[0]]=h.length>1?h[1]:!0;return t},i.ns=function(i){for(var e=i.split("."),s=t,h=0,n=e.length;n>h;h++)s[e[h]]=s[e[h]]||{},s=s[e[h]];return s},i.import=function(t,i){var e="";return i.replace(/\s/g,"").split(",").forEach(function(i){e+="var "+i+"="+t+"."+i+";"}),e},i.debug=i.getUrlParams().debug}(window),function(t){var i=t.Utils={};i.extends=function(t,i){t.prototype=Object.create(i.prototype),t.prototype.superClass=i.prototype,t.prototype.constructor=t},i.getElementOffset=function(t){for(var i=t.offsetLeft,e=t.offsetTop;(t=t.offsetParent)&&t!=document.body&&t!=document;)i+=t.offsetLeft,e+=t.offsetTop;return{x:i,y:e}},i.merge=function(t,i){for(var e in i)t[e]=i[e];return t},i.getUrlParams=function(){var t={},i=window.location.href,e=i.indexOf("?");if(e>0)for(var s,h,n=i.substring(e+1),o=n.split("&"),r=0;s=o[r];r++)h=o[r]=s.split("="),t[h[0]]=h.length>1?h[1]:!0;return t},i.getRandom=function(t,i,e){t>i&&(t=i+t,i=t-i,t-=i);var s=Math.random()*(i-t)+t;return e?s>>0:s}}(FL),function(t){var i=t.Vector=function(t,i){this.x=t||0,this.y=i||0};i.prototype.set=function(t,i){this.x=t,this.y=i},i.prototype.getClone=function(){return new i(this.x,this.y)},i.prototype.cut=function(t){var i=Math.min(t,this.getLength());this.setLength(i)},i.prototype.cutNew=function(t){var i=Math.min(t,this.getLength()),e=this.getClone();return e.setLength(i),e},i.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},i.prototype.plus=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.plusNew=function(t){return new i(this.x+t.x,this.y+t.y)},i.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.minusNew=function(t){return new i(this.x-t.x,this.y-t.y)},i.prototype.negate=function(){this.x=-this.x,this.y=-this.y},i.prototype.negateNew=function(){return new i(-this.x,-this.y)},i.prototype.scale=function(t){this.x*=t,this.y*=t},i.prototype.scaleNew=function(t){return new i(this.x*t,this.y*t)},i.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.setLength=function(t){var i=this.getLength();i?this.scale(t/i):this.x=t},i.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},i.prototype.setAngle=function(t){var i=this.getLength();this.x=i*Math.cos(t),this.y=i*Math.sin(t)},i.prototype.rotate=function(){var t,i,e=arguments;1==e.length?(t=Math.cos(e[0]),i=Math.sin(e[0])):(t=e[0],i=e[1]);var s=this.x*t-this.y*i,h=this.x*i+this.y*t;this.x=s,this.y=h},i.prototype.rotateNew=function(t){var e=new i(this.x,this.y);return e.rotate(t),e},i.prototype.cross=function(t){return this.x*t.y-t.x*this.y},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.getNormal=function(){return new i(-this.y,this.x)},i.prototype.isPerpTo=function(t){return 0==this.dot(t)},i.prototype.angleBetween=function(t){var i=this.dot(t),e=i/(this.getLength()*t.getLength());return Math.acos(e)},i.prototype.getLength2=function(){return this.x*this.x+this.y*this.y}}(window),function(t){var i=t.Rect=function(t,i,e,s){this.set(t,i,e,s)};i.prototype.set=function(t,i,e,s){this.left=this.x=t||0,this.top=this.y=i||0,this.width=e||this.width||0,this.height=s||this.height||0,this.right=this.x+this.width,this.bottom=this.y+this.height},i.prototype.intersects=function(t){return t.x<=this.right&&this.x<=t.right&&t.y<=this.bottom&&this.y<=t.bottom},i.prototype.hitTestPoint=function(t,i){return t>=this.x&&t<=this.right&&i>=this.y&&i<=this.bottom}}(FL),function(t){function i(t){var i=s(t.p0.x,t.p1.x),n=s(t.p0.y,t.p1.y),o=t.p0.x-t.p1.x,r=t.p0.y-t.p1.y;return new e(i,n,h(o),h(r))}var e=t.Rect,s=Math.min;Math.max;var h=Math.abs,n=t.Line=function(t,i){this.p0=t||new Vector,this.p1=i||new Vector};n.prototype.getPoint=function(t){var i=(this.p1.x-this.p0.x)*t+this.p0.x,e=(this.p1.y-this.p0.y)*t+this.p0.y;return new Vector(i,e)},n.prototype.getAngle=function(){var t=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y;return Math.atan2(i,t)},n.prototype.getY=function(t){return this.lx=this.lx||Math.min(this.p0.x,this.p1.x),this.rx=this.rx||Math.max(this.p0.x,this.p1.x),t<this.lx||t>this.rx?null:(this._getY=this._getY||function(t){var i=this.p0.x,e=this.p0.y,s=this.p1.x,h=this.p1.y;return i==s?Math.min(e,h):e==h?e:(t-i)/(s-i)*(h-e)+e},this._getY(t))},n.prototype.createPoints=function(){var t=[];this.lx=this.lx||Math.min(this.p0.x,this.p1.x),this.rx=this.rx||Math.max(this.p0.x,this.p1.x);for(var i=this.getAngle(),e=this.lx>>0;e<=this.rx;e++)null!=this.getY(e)&&t.push({x:e,y:this.getY(e),ang:i});return t},n.prototype.hitTestPoint=function(t,e){var s=new Vector(t,e);return s.minus(this.p0),0==s.cross(this.p1.minusNew(this.p0))&&i(this).hitTestPoint(s.x,s.y)},n.prototype.intersects=function(t){if(i(t).intersects(i(this))){var e=this.p0,s=this.p1,h=t.p0,n=t.p1,o=s.minusNew(e),r=n.minusNew(h);return h.minusNew(e).cross(o)*o.cross(n.minusNew(e))>=0&&e.minusNew(h).cross(r)*r.cross(s.minusNew(h))>=0}return!1}}(FL),function(t){var i=t.Line,e=t.Polygon=function(t){this.points=t};e.prototype.hitTestPoint=function(t,e){for(var s=new i(new Vector(t,e),new Vector(-1e3,e)),h=0,n=this.points,o=0,r=n.length;r>o;o++){var a=new i(n[o],n[(o+1)%r]);if(a.hitTestPoint(t,e))return!0;a.p0.x!=a.p1.x&&(s.hitTestPoint(a.p0)?h++:!s.hitTestPoint(a.p1)&&s.intersects(a)&&h++)}return 1==h%2}}(FL),function(t){var i=100,e=function(t,i){this.x=t,this.y=i},s=t.Bezier=function(){var t=arguments;4==t.length?(this.p0=t[0],this.p1=t[1],this.p2=t[2],this.p3=t[3]):8==t.length&&(this.p0=new e(t[0],t[1]),this.p1=new e(t[2],t[3]),this.p2=new e(t[4],t[5]),this.p3=new e(t[6],t[7]))};s.prototype.getSpeedLength=function(t){var i=1-t,e=i*i,s=t*t,h=-3*this.p0.x*e+3*this.p1.x*e-6*this.p1.x*i*t+6*this.p2.x*i*t-3*this.p2.x*s+3*this.p3.x*s,n=-3*this.p0.y*e+3*this.p1.y*e-6*this.p1.y*i*t+6*this.p2.y*i*t-3*this.p2.y*s+3*this.p3.y*s;return Math.sqrt(h*h+n*n)},s.prototype.getLength=function(t){var e,s=parseInt(i*t);if(1&s&&s++,0==s)return 0;var h=s>>1,n=0,o=0,r=t/s;for(e=0;h>e;e++)n+=this.getSpeedLength((2*e+1)*r);for(e=1;h>e;e++)o+=this.getSpeedLength(2*e*r);return(this.getSpeedLength(0)+this.getSpeedLength(1)+2*o+4*n)*r/3},s.prototype.getPointByTime=function(t){var i=1-t,e=i*i,s=e*i,h=t*t,n=h*t;return new Vector(s*this.p0.x+3*e*t*this.p1.x+3*i*h*this.p2.x+n*this.p3.x,s*this.p0.y+3*e*t*this.p1.y+3*i*h*this.p2.y+n*this.p3.y)},s.prototype.getPointByLen=function(t){if(t>this.length)return this.p3;for(var i,e=t/this.length;;){if(i=e-(this.getLength(e)-t)/this.getSpeedLength(e),Math.abs(e-i)<.01)break;e=i}return this.getPointByTime(i)},s.prototype.getPointsByLen=function(t){t=t||1;for(var i=this.getLength(),e=0,s=[];i>e;)s.push(this.getPointByLen(e)),e+=t;return s.push(this.getPointByLen(i)),s},s.prototype.getPointsByTime=function(t){t=t||.01;for(var i=0,e=[];1>i;)e.push(this.getPointByTime(i)),i+=t;return e.push(this.getPointByTime(1)),e}}(FL),function(t){var i=t.EventDispatcher=function(){this.eventListeners={}};i.prototype.addEventListener=function(t,i){this.eventListeners[t]||(this.eventListeners[t]=[]),-1==this.eventListeners[t].indexOf(i)&&this.eventListeners[t].push(i)},i.prototype.removeEventListener=function(t,i){if(this.eventListeners[t]){var e=this.eventListeners[t].indexOf(i);-1!=e&&this.eventListeners[t].splice(e,1)}},i.prototype.removeAllEventListener=function(){this.eventListeners={}},i.prototype.dispatchEvent=function(t){var i=this.eventListeners[t.type];if(t.target=this,i&&i.length>0){i=i.slice(0);for(var e=0,s=i.length;s>e;e++)i[e].call(this,t)}}}(FL),function(t){var i=t.Utils,e=t.EventDispatcher,s=t.ImageLoader=function(){e.call(this),this.init()};i.extends(s,e),s.prototype.init=function(){this.images={},this.totalSize=0,this.loadSize=0},s.prototype.load=function(t){var i=this;this.init();for(var e=this.images,s=0,h=t.length;h>s;s++){var n=new Image;n.onload=function(t){i._onCompleteHander(t)},this.totalSize+=t[s].size,e[t[s].id]=n,n.size=t[s].size,n.src=t[s].src,n.id=t[s].id}},s.prototype._onCompleteHander=function(t){this.loadSize+=t.target.size,this.loadSize-this.totalSize>-.1?this.dispatchEvent({type:"complete"}):this.dispatchEvent({type:"progress"}),log("load:"+t.target.id+",  "+Math.floor(this.loadSize)+"/"+Math.floor(this.totalSize))}}(FL),function(t){var i=t.Utils;t.Mouse={stage:null,x:0,y:0,init:function(t){this.stage=t,this.element=this.stage.canvas,this.x=0,this.y=0,this.isDown=!1;var e=i.getElementOffset(this.element);this.offsetX=e.x,this.offsetY=e.y,this.addEvent()},addEvent:function(){var t=this.element,i=["mousedown","mousemove","mouseup"],e=this;i.forEach(function(i,s){t["on"+i]=function(t){t.preventDefault(),0==s?e.isDown=!0:2==s&&(e.isDown=!1);var h=t.changedTouches?t.changedTouches[0].pageX:t.pageX,n=t.changedTouches?t.changedTouches[0].pageY:t.pageY;e.x=h-e.offsetX,e.y=n-e.offsetY,e.stage.dispatchEvent({type:i,x:e.x,y:e.y})}})}}}(FL),function(t){t.Utils,t.Keyboard={init:function(){this.elem=document,this.key={},this.time={},this.delay={},this.addEvent()},addEvent:function(){var t=this.elem,i=this.key,e=this.time,s=this.delay,h=this;t.addEventListener("keydown",function(t){t.preventDefault(),i[t.keyCode]!==!0&&(i[t.keyCode]=!0,s[t.keyCode]=new Date-e[t.keyCode],e[t.keyCode]=new Date,h.keyDown())}),t.addEventListener("keyup",function(t){t.preventDefault(),i[t.keyCode]=!1,h.keyUp()})},getIsDown:function(t){return this.key[i[t]]},getKeyDelay:function(t){return this.delay[i[t]]},keyDown:function(){},keyUp:function(){}};var i={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123}}(FL),function(t){var i=t.Utils,e=t.EventDispatcher,s=t.Rect,h=t.Polygon,n=t.DisplayObject=function(t,i){this.x=t||0,this.y=i||0,this.originX=0,this.originY=0,this.scaleX=1,this.scaleY=1,this.width=0,this.height=0,this.angle=0,this.alpha=1,this.timeStep=0,this.mouseEnable=!1,this.visible=!0,this.rect=new s,e.call(this)};i.extends(n,e),n.prototype.render=function(t){this.isInStage=this._inStage(),this.visible&&t&&this.isInStage&&(t.save(),t.globalAlpha=this.alpha,t.translate(this.x,this.y),t.rotate(this.angle),t.scale(this.scaleX,this.scaleY),this._draw(t),t.restore(),FL.debug&&this._debugDraw(t))},n.prototype._debugDraw=function(t){t.save();var i=this.getBounds();t.strokeStyle="#f00",t.lineWidth=.5,t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var e=1,s=this.points.length;s>e;e++)t.lineTo(this.points[e].x,this.points[e].y);t.closePath(),t.stroke(),t.strokeStyle="#00f",t.beginPath(),t.strokeRect(i.x,i.y,i.width,i.height),t.stroke(),t.restore()},n.prototype.setCenter=function(){this.originX=this.width>>1,this.originY=this.height>>1},n.prototype._draw=function(){},n.prototype.initStage=function(t,i){this.stage=t,this.timeStep=i},n.prototype._inStage=function(){return this.stage&&this.x+2*this.width>0&&this.y+2*this.height>0&&this.x-2*this.width<this.stage.width&&this.y-2*this.height<this.stage.height},n.prototype.getBounds=function(){for(var t,i,e,h,n=Math.cos(this.angle),o=Math.sin(this.angle),r=this.originX,a=this.originY,p=[[0,0],[0,this.height],[this.width,this.height],[this.width,0]],c=3;c>=0;c--){var u=p[c][0]-r,l=p[c][1]-a,g=u*n-l*o+this.x,d=u*o+l*n+this.y;p[c]=new Vector(g,d),3==c?(t=e=g,i=h=d):(t>g&&(t=g),i>d&&(i=d),g>e&&(e=g),d>h&&(h=d))}return this.points=p,new s(t,i,e-t,h-i)},n.prototype.getConcatenatedMatrix=function(t){var i=new FL.Matrix(1,0,0,1,0,0);if(t==this)return i;for(var e=this;null!=e.parent&&e.parent!=t;e=e.parent){var s=1,h=0;if(0!=e.rotation%360){var n=e.rotation*DEG_TO_RAD;s=Math.cos(n),h=Math.sin(n)}0!=e.regX&&(i.tx-=e.regX),0!=e.regY&&(i.ty-=e.regY),i.concat(new FL.Matrix(s*e.scaleX,h*e.scaleX,-h*e.scaleY,s*e.scaleY,e.x,e.y))}return i},n.prototype.hitTestPoint=function(t,i){return 0==this.angle?new s(this.x-this.originX,this.y-this.originY,this.width,this.height).hitTestPoint(t,i):this.getBounds().hitTestPoint(t,i)?new h(this.points).hitTestPoint(t,i):!1},n.prototype.hitTestObject=function(t){var i=this.bounds||this.getBounds();return i.intersects(t.bounds||t.getBounds())?!0:!1}}(FL),function(t){var i=t.Utils,e=t.DisplayObject,s=t.DisplayObjectContainer=function(t,i,s){s&&s.addChild(this),e.call(this,t,i),this.children=[]};i.extends(s,e),s.prototype.addChild=function(){for(var t=0,i=arguments.length;i>t;t++)this._addChild(arguments[t])},s.prototype._debugDraw=function(){},s.prototype._addChild=function(t){var i=this.children.indexOf(t);if(-1!=i&&this.children.splice(i,1),this.children.push(t),t.parent=this,this.stage){var e={stage:this.stage,timeStep:this.timeStep};t instanceof s?t.setAll(e):utils.merge(t,e)}},s.prototype.removeChild=function(t){var i="number"==typeof t?t:this.children.indexOf(t);0>i||(this.children[i].parent=null,this.children.splice(i,1))},s.prototype._draw=function(t){t.save(),t.translate(this.x,this.y);for(var i=0,e=this.children.length;e>i;i++)this.children[i].render(t);t.restore()},s.prototype.setAll=function(t){var e=this.children;i.merge(this,t);for(var h=e.length-1;h>=0;h--){var n=e[h];i.merge(n,t),n instanceof s?n.setAll(t):i.merge(this,t)}},s.prototype.callAll=function(t){this[t]&&this[t]();for(var i=this.children,e=i.length-1;e>=0;e--){var h=i[e];h instanceof s?h.callAll(t):h[t]&&h[t]()}}}(FL),function(t){var i=t.Utils,e=t.DisplayObject,s=t.Rect,h=t.Bitmap=function(t,i,h){e.call(this,t,i),this.rect=new s,h&&this.setImg(h)};i.extends(h,e),h.prototype._draw=function(t){var i=this.rect;this.img&&t.drawImage(this.img,i.x,i.y,i.width,i.height,-this.originX,-this.originY,this.width,this.height)},h.prototype.setRect=function(t,i,e,s){this.rect.set(t,i,e,s)},h.prototype.setImg=function(t){this.img=t,this.width=t.width,this.height=t.height,this.rect.set(0,0,this.width,this.height)}}(FL),function(t){var i=t.Utils,e=t.Bitmap,s=document.createElement("canvas");s.width=1600,s.height=800;var h=s.getContext("2d"),n=document.createElement("canvas"),o=n.getContext("2d"),r=t.Canvas=function(t,i){e.call(this,t,i),this.cacheCtx=h,this.cacheCanvas=s};i.extends(r,e),r.prototype.setImage=function(t,i){this.rect.width=this.width=n.width=t||200,this.rect.height=this.height=n.height=i||200,o.drawImage(s,0,0),this.img=this.img||new Image,this.img.src=n.toDataURL()}}(FL),function(t){var i=t.Utils,e=t.Rect,s=t.DisplayObjectContainer,h=t.Sprite=function(t,i,h){s.call(this,t,i),this.rect=new e,h&&this.setImg(h)};i.extends(h,s),h.prototype._draw=function(t){this.superClass._draw.call(this,t);var i=this.rect;this.img&&t.drawImage(this.img,i.x,i.y,i.width,i.height,-this.originX,-this.originY,this.width,this.height)},h.prototype.setRect=function(t,i,e,s){this.rect.set(t,i,e,s)},h.prototype.setImg=function(t){this.img=t,this.width=t.width,this.height=t.height,this.rect.set(0,0,this.width,this.height)}}(FL),function(t){var i=t.Utils,e=t.Sprite,s=t.MovieClip=function(t,i){e.call(this,t,i),this._time=0,this.isPlay=!1,this.isLoop=!1,this.frameNum=0,this.totalFrame=0,this.data={},this.action="",this.frames=[],this.setFrameRate(24)};i.extends(s,e),s.prototype.play=function(t,i){if(t!=this.action||i){var e=this.data[t];this.action=t,this.frames=e.frames,this.totalFrame=e.frames.length,this.isLoop=e.loop,this.delay=e.delay||this.delay,this.frameNum=0,this._time=0,this._setFrame()}this.isPlay||(this._time=0,this.isPlay=!0)},s.prototype.stop=function(t){t&&this.play(t),this.isPlay=!1},s.prototype.addAnimation=function(t,i,e,s){if("string"==typeof i){var h=i.split(",");i=[];for(var n=0,o=h.length;o>n;n++){var r=h[n].split("-");if(1==r.length)i.push(parseInt(r[0]));else for(var a=parseInt(r[0]),p=parseInt(r[1]);p>=a;a++)i.push(a)}}var c={frames:i,loop:e||!1};s>0&&(c.delay=1e3/s),this.data[t]=c},s.prototype.setFrameRate=function(t){this.frameRate=t||24,this.delay=1e3/this.frameRate},s.prototype._update=function(){this._time+=this.timeStep,this._time>=this.delay&&(this._time=this._time-this.delay,this.frameNum++,this.frameNum>=this.totalFrame&&(this.frameNum=0,this.isLoop||this.stop()),this._setFrame())},s.prototype._draw=function(t){this.img&&t.drawImage(this.img,this.sourceX,this.sourceY,this.width,this.height,-this.originX,-this.originY,this.width,this.height),this.isPlay&&this._update()},s.prototype._setFrame=function(){var t=this.frames[this.frameNum];this.sourceX=t%this.col*this.width,this.sourceY=(t/this.col>>0)*this.height},s.prototype.setImg=function(t,i,e){this.img=t,this.width=i,this.height=e,this.col=this.img.width/this.width>>0,this.row=this.img.height/this.height>>0}}(FL),function(t){var i=t.DisplayObject,e=t.Utils,s=t.LoadProgress=function(t,e,s){i.call(this,e,s),this.width=400,this.height=10,this.setCenter(),this.init(t)};e.extends(s,i),s.prototype.init=function(t){this.loader=t;var i=this;t.addEventListener("complete",function(){i.progress=1,t.removeEventListener("complete",arguments.callee),t.removeEventListener("progress",arguments.callee),setTimeout(function(){i.dispatchEvent({type:"complete"})},500)}),t.addEventListener("progress",function(){i.progress=t.loadSize/t.totalSize})},s.prototype.load=function(t){var i=this.loader;i.load(t)},s.prototype._draw=function(t){t.fillStyle="#69f",t.fillRect(-this.originX,-this.originY,this.width,this.height),t.fillStyle="#f69",t.fillRect(-this.originX+2,-this.originY+2,(this.width-4)*this.progress,this.height-4)}}(FL),function(t){function i(t){for(var i=this.children,e=0,s=this.children.length;s>e;e++){var h=i[e];if(h.mouseEnable&&h.hitTestPoint(t.x,t.y))return h.dispatchEvent(t),void 0}}var e=t.Utils,s=t.DisplayObjectContainer,h=t.Mouse,n=t.Keyboard,o=t.Stage=function(t,i,e,h){s.call(this),this.init(t,i,e,h)};e.extends(o,s),o.prototype.init=function(t,i,e,s){this.canvas=t,this.width=t.width=i||550,this.height=t.height=e||400,this.fps=s||60,this.timeStep=1e3/this.fps,this.ctx=t.getContext("2d")},o.prototype._addChild=function(t){this.superClass._addChild.call(this,t);var i={stage:this,timeStep:this.timeStep};t instanceof s?t.setAll(i):e.merge(t,i)},o.prototype.render=function(){this.ctx.clearRect(0,0,this.width,this.height),this.superClass._draw.call(this,this.ctx)},o.prototype.start=function(){this.stop();var t=this;this._interval=setInterval(function(){t.render(),t.update(),t.callAll("update")},1e3/this.fps)},o.prototype.update=function(){},o.prototype.initMouseEvent=function(){h.init(this),this.addEventListener("mousedown",i),this.addEventListener("mousemove",i),this.addEventListener("mouseup",i)},o.prototype.initKeyboardEvent=function(){n.init()},o.prototype.stop=function(){clearInterval(this._interval)}}(FL),function(t){var i=t.Rect,e=FL.Camera=function(t,i,e,s,h){this.x=t,this.y=i,this.width=e,this.height=s,this.zoom=h||1,this.scroll=new Vector,this.bounds=null,this.target=null,this.deadzone=null};e.prototype.update=function(){if(null!=this.target)if(null==this.deadzone)this.focusOn(this.target.x+.5*this.target.width,this.target.y+.5*this.target.height);else{var t=this.target.x+(this.target.x>0?1e-7:-1e-7),i=this.target.y+(this.target.y>0?1e-7:-1e-7),e=t-deadzone.x;this.scroll.x>e&&(this.scroll.x=e),e=t+this.target.width-this.deadzone.x-this.deadzone.width,this.scroll.x<e&&(this.scroll.x=e),e=i-this.deadzone.y,this.scroll.y>e&&(this.scroll.y=e),e=i+this.target.height-this.deadzone.y-this.deadzone.height,this.scroll.y<e&&(this.scroll.y=e)}null!=this.bounds&&(this.scroll.x<this.bounds.left&&(this.scroll.x=bounds.left),scroll.x>this.bounds.right-width&&(this.scroll.x=bounds.right-width),scroll.y<this.bounds.top&&(this.scroll.y=bounds.top),scroll.y>this.bounds.bottom-height&&(this.scroll.y=this.bounds.bottom-height))},e.prototype.follow=function(t,e){this.target=t;var s;switch(e){case"platFormer":var h=this.width/8,n=this.height/3;this.deadzone=new i((this.width-h)/2,(this.height-n)/2-.25*n,h,n);break;case"topDown":s=Math.max(this.width,this.height)/4,this.deadzone=new i((this.width-s)/2,(this.height-s)/2,s,s);break;case"topDownTight":s=Math.max(width,height)/8,this.deadzone=new i((this.width-s)/2,(this.height-s)/2,s,s);break;case"direct":default:this.deadzone=null}},e.prototype.focusOn=function(t){this.scroll.set(t.x-.5*this.width,t.y-.5*this.height)},e.prototype.setBounds=function(t,e,s,h){this.bounds=this.bounds||new i,this.bounds.set(t,e,s,h),this.update()}}(FL),function(){function t(){for(var t=i.length-1;t>=0;t--){var s=i[t],o=e[t];s.duration>0?(s.duration-=h,("xy"==s.direction||"x"==s.direction)&&(o.x=s.x+(Math.random()-.5)*s.intensity*o.width),("xy"==s.direction||"y"==s.direction)&&(o.y=s.y+(Math.random()-.5)*s.intensity*o.height)):n.stop(o)}}var i=[],e=[],s=-1,h=17;s=setInterval(t,h);var n=FL.Shake={shake:function(t,s,h,n){var o=e.indexOf(t);o=-1==o?e.length:o,i[o]={duration:1e3*s||400,intensity:h||.01,direction:n||"xy",x:t.x,y:t.y},e[o]=t},stop:function(t){var s=e.indexOf(t);-1!=s&&(t.x=i[s].x,t.y=i[s].y,i.splice(s,1),e.splice(s,1))}}}(FL);
//# sourceMappingURL=FL.min.js.map