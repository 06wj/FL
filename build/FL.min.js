!function(t){var i=t.FL={};try{t.log=function(){console.log.apply(console,arguments)}}catch(e){t.log=function(){console.dir(arguments)}}t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,i.merge=function(t,i){for(var e in i)t[e]=i[e];return t},i.getUrlParams=function(){var t={},i=window.location.href,e=i.indexOf("?");if(e>0)for(var s,n,h=i.substring(e+1),o=h.split("&"),r=0;s=o[r];r++)n=o[r]=s.split("="),t[n[0]]=n.length>1?n[1]:!0;return t},i.ns=function(i){for(var e=i.split("."),s=t,n=0,h=e.length;h>n;n++)s[e[n]]=s[e[n]]||{},s=s[e[n]];return s},i.import=function(t,i){var e="";return i.replace(/\s/g,"").split(",").forEach(function(i){e+="var "+i+"="+t+"."+i+";"}),e},i.params=i.getUrlParams(),i.debug=i.params.debug&&0!=i.params.debug}(window),function(){var t=FL.Utils={};t.extends=function(t,i){t.prototype=Object.create(i.prototype),t.prototype.superClass=i.prototype,t.prototype.constructor=t},t.getElementOffset=function(t){for(var i=t.offsetLeft,e=t.offsetTop;(t=t.offsetParent)&&t!=document.body&&t!=document;)i+=t.offsetLeft,e+=t.offsetTop;return{x:i,y:e}},t.merge=function(t,i){for(var e in i)t[e]=i[e];return t},t.getUrlParams=function(){var t={},i=window.location.href,e=i.indexOf("?");if(e>0)for(var s,n,h=i.substring(e+1),o=h.split("&"),r=0;s=o[r];r++)n=o[r]=s.split("="),t[n[0]]=n.length>1?n[1]:!0;return t},t.getRandom=function(t,i,e){t>i&&(t=i+t,i=t-i,t-=i);var s=Math.random()*(i-t)+t;return e?s>>0:s}}(),function(t){var i=t.Vector=function(t,i){this.x=t||0,this.y=i||0};i.prototype.set=function(t,i){this.x=t,this.y=i},i.prototype.getClone=function(){return new i(this.x,this.y)},i.prototype.cut=function(t){var i=Math.min(t,this.getLength());this.setLength(i)},i.prototype.cutNew=function(t){var i=Math.min(t,this.getLength()),e=this.getClone();return e.setLength(i),e},i.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},i.prototype.plus=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.plusNew=function(t){return new i(this.x+t.x,this.y+t.y)},i.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.minusNew=function(t){return new i(this.x-t.x,this.y-t.y)},i.prototype.negate=function(){this.x=-this.x,this.y=-this.y},i.prototype.negateNew=function(){return new i(-this.x,-this.y)},i.prototype.scale=function(t){this.x*=t,this.y*=t},i.prototype.scaleNew=function(t){return new i(this.x*t,this.y*t)},i.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.prototype.setLength=function(t){var i=this.getLength();i?this.scale(t/i):this.x=t},i.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},i.prototype.setAngle=function(t){var i=this.getLength();this.x=i*Math.cos(t),this.y=i*Math.sin(t)},i.prototype.rotate=function(){var t,i,e=arguments;1==e.length?(t=Math.cos(e[0]),i=Math.sin(e[0])):(t=e[0],i=e[1]);var s=this.x*t-this.y*i,n=this.x*i+this.y*t;this.x=s,this.y=n},i.prototype.rotateNew=function(t){var e=new i(this.x,this.y);return e.rotate(t),e},i.prototype.cross=function(t){return this.x*t.y-t.x*this.y},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.getNormal=function(){return new i(-this.y,this.x)},i.prototype.isPerpTo=function(t){return 0==this.dot(t)},i.prototype.angleBetween=function(t){var i=this.dot(t),e=i/(this.getLength()*t.getLength());return Math.acos(e)},i.prototype.getLength2=function(){return this.x*this.x+this.y*this.y}}(window),function(){var t=FL.Rect=function(t,i,e,s){this.set(t,i,e,s)};t.prototype.set=function(t,i,e,s){this.left=this.x=t||0,this.top=this.y=i||0,this.width=e||this.width||0,this.height=s||this.height||0,this.right=this.x+this.width,this.bottom=this.y+this.height},t.prototype.intersects=function(t){return t.x<=this.right&&this.x<=t.right&&t.y<=this.bottom&&this.y<=t.bottom},t.prototype.hitTestPoint=function(t,i){return t>=this.x&&t<=this.right&&i>=this.y&&i<=this.bottom}}(),function(){function t(t){var s=e(t.p0.x,t.p1.x),h=e(t.p0.y,t.p1.y),o=t.p0.x-t.p1.x,r=t.p0.y-t.p1.y;return new i(s,h,n(o),n(r))}var i=FL.Rect,e=Math.min,s=Math.max,n=Math.abs,h=FL.Line=function(t,i){this.p0=t||new Vector,this.p1=i||new Vector};h.prototype.getPoint=function(t){var i=(this.p1.x-this.p0.x)*t+this.p0.x,e=(this.p1.y-this.p0.y)*t+this.p0.y;return new Vector(i,e)},h.prototype.getAngle=function(){var t=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y;return Math.atan2(i,t)},h.prototype.getY=function(t){return this.lx=this.lx||e(this.p0.x,this.p1.x),this.rx=this.rx||s(this.p0.x,this.p1.x),t<this.lx||t>this.rx?null:(this._getY=this._getY||function(t){var i=this.p0.x,e=this.p0.y,s=this.p1.x,n=this.p1.y;return i==s?Math.min(e,n):e==n?e:(t-i)/(s-i)*(n-e)+e},this._getY(t))},h.prototype.createPoints=function(){var t=[];this.lx=this.lx||e(this.p0.x,this.p1.x),this.rx=this.rx||s(this.p0.x,this.p1.x);for(var i=this.getAngle(),n=this.lx>>0;n<=this.rx;n++)null!=this.getY(n)&&t.push({x:n,y:this.getY(n),ang:i});return t},h.prototype.hitTestPoint=function(i,e){var s=new Vector(i,e);return s.minus(this.p0),0==s.cross(this.p1.minusNew(this.p0))&&t(this).hitTestPoint(s.x,s.y)},h.prototype.intersects=function(i){if(t(i).intersects(t(this))){var e=this.p0,s=this.p1,n=i.p0,h=i.p1,o=s.minusNew(e),r=h.minusNew(n);return n.minusNew(e).cross(o)*o.cross(h.minusNew(e))>=0&&e.minusNew(n).cross(r)*r.cross(s.minusNew(n))>=0}return!1}}(),function(){var t=FL.Line,i=FL.Polygon=function(t){this.points=t};i.prototype.hitTestPoint=function(i,e){for(var s=new t(new Vector(i,e),new Vector(-1e3,e)),n=0,h=this.points,o=0,r=h.length;r>o;o++){var a=new t(h[o],h[(o+1)%r]);if(a.hitTestPoint(i,e))return!0;a.p0.x!=a.p1.x&&(s.hitTestPoint(a.p0)?n++:!s.hitTestPoint(a.p1)&&s.intersects(a)&&n++)}return n%2==1}}(),function(){var t=100,i=FL.Point=function(t,i){this.x=t,this.y=i},e=FL.Bezier=function(){var t=arguments;4==t.length?(this.p0=t[0],this.p1=t[1],this.p2=t[2],this.p3=t[3]):8==t.length&&(this.p0=new i(t[0],t[1]),this.p1=new i(t[2],t[3]),this.p2=new i(t[4],t[5]),this.p3=new i(t[6],t[7]))};e.prototype.getSpeedLength=function(t){var i=1-t,e=i*i,s=t*t,n=-3*this.p0.x*e+3*this.p1.x*e-6*this.p1.x*i*t+6*this.p2.x*i*t-3*this.p2.x*s+3*this.p3.x*s,h=-3*this.p0.y*e+3*this.p1.y*e-6*this.p1.y*i*t+6*this.p2.y*i*t-3*this.p2.y*s+3*this.p3.y*s;return Math.sqrt(n*n+h*h)},e.prototype.getLength=function(i){var e,s=parseInt(t*i);if(1&s&&s++,0==s)return 0;var n=s>>1,h=0,o=0,r=i/s;for(e=0;n>e;e++)h+=this.getSpeedLength((2*e+1)*r);for(e=1;n>e;e++)o+=this.getSpeedLength(2*e*r);return(this.getSpeedLength(0)+this.getSpeedLength(1)+2*o+4*h)*r/3},e.prototype.getPointByTime=function(t){var i=1-t,e=i*i,s=e*i,n=t*t,h=n*t;return new Vector(s*this.p0.x+3*e*t*this.p1.x+3*i*n*this.p2.x+h*this.p3.x,s*this.p0.y+3*e*t*this.p1.y+3*i*n*this.p2.y+h*this.p3.y)},e.prototype.getPointByLen=function(t){if(t>this.length)return this.p3;for(var i,e=t/this.length;;){if(i=e-(this.getLength(e)-t)/this.getSpeedLength(e),Math.abs(e-i)<.01)break;e=i}return this.getPointByTime(i)},e.prototype.getPointsByLen=function(t){t=t||1;for(var i=this.getLength(),e=0,s=[];i>e;)s.push(this.getPointByLen(e)),e+=t;return s.push(this.getPointByLen(i)),s},e.prototype.getPointsByTime=function(t){t=t||.01;for(var i=0,e=[];1>i;)e.push(this.getPointByTime(i)),i+=t;return e.push(this.getPointByTime(1)),e}}(),function(){var t=FL.EventDispatcher=function(){this.eventListeners={}};t.prototype.addEventListener=function(t,i){this.eventListeners[t]||(this.eventListeners[t]=[]),-1==this.eventListeners[t].indexOf(i)&&this.eventListeners[t].push(i)},t.prototype.removeEventListener=function(t,i){if(this.eventListeners[t]){var e=this.eventListeners[t].indexOf(i);-1!=e&&this.eventListeners[t].splice(e,1)}},t.prototype.removeAllEventListener=function(){this.eventListeners={}},t.prototype.dispatchEvent=function(t){var i=this.eventListeners[t.type];if(t.target=this,i&&i.length>0){i=i.slice(0);for(var e=0,s=i.length;s>e;e++)i[e].call(this,t)}},t.prototype.on=t.prototype.addEventListener,t.prototype.off=t.prototype.removeEventListener,t.prototype.fire=function(t,i){var e={type:t};FL.merge(e,i||{}),this.dispatchEvent(e)}}(),function(){var t=FL.Utils,i=FL.EventDispatcher,e=FL.ImageLoader=function(){i.call(this),this.init()};t.extends(e,i),e.prototype.init=function(){this.images={},this.totalSize=0,this.loadSize=0},e.prototype.load=function(t){var i=this;this.init();for(var e=this.images,s=0,n=t.length;n>s;s++){var h=new Image;h.onload=function(t){i._onCompleteHander(t)},this.totalSize+=t[s].size,e[t[s].id]=h,h.size=t[s].size,h.src=t[s].src,h.id=t[s].id}},e.prototype._onCompleteHander=function(t){this.loadSize+=t.target.size,this.loadSize-this.totalSize>-.1?this.dispatchEvent({type:"complete"}):this.dispatchEvent({type:"progress"}),log("load:"+t.target.id+",  "+Math.floor(this.loadSize)+"/"+Math.floor(this.totalSize))}}(),function(){{var t=FL.Utils;FL.Mouse={stage:null,x:0,y:0,init:function(i){this.stage=i,this.element=document,this.x=0,this.y=0,this.isDown=!1;var e=t.getElementOffset(this.element);this.offsetX=e.x,this.offsetY=e.y,this.addEvent()},addEvent:function(){var t=this.element,i=["mousedown","mousemove","mouseup"],e="ontouchstart"in window?["touchstart","touchmove","touchend"]:i,s=this;e.forEach(function(i,e){t.addEventListener(i,function(t){t.preventDefault(),0==e?s.isDown=!0:2==e&&(s.isDown=!1);var n=t.changedTouches?t.changedTouches[0].pageX:t.pageX,h=t.changedTouches?t.changedTouches[0].pageY:t.pageY;s.x=n-s.offsetX,s.y=h-s.offsetY,s.stage.dispatchEvent({type:i,x:s.x,y:s.y})})})}}}}(),function(){var t=(FL.Utils,FL.Keyboard={init:function(){this.elem=document,this.key={},this.time={},this.delay={},this.addEvent()},addEvent:function(){var t=this.elem,i=this.key,e=this.time,s=this.delay,n=this;t.addEventListener("keydown",function(t){t.preventDefault(),i[t.keyCode]!==!0&&(i[t.keyCode]=!0,s[t.keyCode]=new Date-e[t.keyCode],e[t.keyCode]=new Date,n.keyDown())}),t.addEventListener("keyup",function(t){t.preventDefault(),i[t.keyCode]=!1,n.keyUp()})},getIsDown:function(i){return this.key[t[i]]},getKeyDelay:function(i){return this.delay[t[i]]},keyDown:function(){},keyUp:function(){}},{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123})}(),function(){var t=FL.Utils,i=FL.EventDispatcher,e=FL.Rect,s=FL.Polygon,n=FL.DisplayObject=function(t){this.x=0,this.y=0,this.originX=0,this.originY=0,this.scaleX=1,this.scaleY=1,this.width=0,this.height=0,this.angle=0,this.alpha=1,this.timeStep=0,this.mouseEnable=!1,this.visible=!0,this.rect=new e,i.call(this),FL.merge(this,t)};t.extends(n,i),n.prototype.render=function(t){this.isInStage=this._inStage(),this.visible&&t&&this.isInStage&&(t.save(),t.globalAlpha=this.alpha,t.translate(this.x,this.y),t.rotate(this.angle),t.scale(this.scaleX,this.scaleY),this._draw(t),t.restore(),FL.debug&&this._debugDraw(t))},n.prototype._debugDraw=function(t){t.save();var i=this.getBounds();t.strokeStyle="#f00",t.lineWidth=.5,t.beginPath(),t.moveTo(this.hitPoints[0].x,this.hitPoints[0].y);for(var e=1,s=this.hitPoints.length;s>e;e++)t.lineTo(this.hitPoints[e].x,this.hitPoints[e].y);t.closePath(),t.stroke(),t.strokeStyle="#00f",t.beginPath(),t.strokeRect(i.x,i.y,i.width,i.height),t.stroke(),t.restore()},n.prototype.setCenter=function(){this.originX=this.width>>1,this.originY=this.height>>1},n.prototype._draw=function(){},n.prototype.initStage=function(t,i){this.stage=t,this.timeStep=i},n.prototype._inStage=function(){return this.stage&&this.x+2*this.width>0&&this.y+2*this.height>0&&this.x-2*this.width<this.stage.width&&this.y-2*this.height<this.stage.height},n.prototype.getBounds=function(){for(var t,i,s,n,h=Math.abs(this.scaleX),o=Math.abs(this.scaleY),r=Math.cos(this.angle),a=Math.sin(this.angle),p=this.originX*h,c=this.originY*o,u=[[0,0],[0,this.height*o],[this.width*h,this.height*o],[this.width*h,0]],l=3;l>=0;l--){var d=u[l][0]-p,g=u[l][1]-c,y=d*r-g*a+this.x,f=d*a+g*r+this.y;u[l]=new Vector(y,f),3==l?(t=s=y,i=n=f):(t>y&&(t=y),i>f&&(i=f),y>s&&(s=y),f>n&&(n=f))}return this.hitPoints=u,new e(t,i,s-t,n-i)},n.prototype.getConcatenatedMatrix=function(t){var i=new FL.Matrix(1,0,0,1,0,0);if(t==this)return i;for(var e=this;null!=e.parent&&e.parent!=t;e=e.parent){var s=1,n=0;if(e.rotation%360!=0){var h=e.rotation*DEG_TO_RAD;s=Math.cos(h),n=Math.sin(h)}0!=e.regX&&(i.tx-=e.regX),0!=e.regY&&(i.ty-=e.regY),i.concat(new FL.Matrix(s*e.scaleX,n*e.scaleX,-n*e.scaleY,s*e.scaleY,e.x,e.y))}return i},n.prototype.hitTestPoint=function(t,i){if(0==this.angle){var n=Math.abs(this.scaleX),h=Math.abs(this.scaleY);return new e(this.x-this.originX*n,this.y-this.originY*h,this.width*n,this.height*h).hitTestPoint(t,i)}return this.getBounds().hitTestPoint(t,i)?new s(this.hitPoints).hitTestPoint(t,i):!1},n.prototype.hitTestObject=function(t){var i=this.bounds||this.getBounds();return i.intersects(t.bounds||t.getBounds())?!0:!1}}(),function(){var t=FL.Utils,i=FL.DisplayObject,e=FL.DisplayObjectContainer=function(t){i.call(this,t),this.parent&&this.parent.addChild(this),this.children=[]};t.extends(e,i),e.prototype.addChildAt=function(i,s){if(s="undefined"==s?this.children.length:s,this.removeChild(i),this.children.splice(s,0,i),i.parent=this,this.stage){var n={stage:this.stage,timeStep:this.timeStep};i instanceof e?i.setAll(n):t.merge(i,n)}},e.prototype.addChild=function(){for(var t=this.children.length,i=0,e=arguments.length;e>i;i++)this.addChildAt(arguments[i],t++)},e.prototype.removeChild=function(t){var i="number"==typeof t?t:this.children.indexOf(t);0>i||(this.children[i].parent=null,this.children.splice(i,1))},e.prototype._draw=function(t){for(var i=0,e=this.children.length;e>i;i++)this.children[i].render(t)},e.prototype.setAll=function(i){var s=this.children;t.merge(this,i);for(var n=s.length-1;n>=0;n--){var h=s[n];t.merge(h,i),h instanceof e?h.setAll(i):t.merge(this,i)}},e.prototype.callAll=function(t){this[t]&&this[t]();for(var i=this.children,s=i.length-1;s>=0;s--){var n=i[s];n instanceof e?n.callAll(t):n[t]&&n[t]()}}}(),function(){var t=FL.Utils,i=FL.DisplayObject,e=FL.Rect,s=FL.Bitmap=function(t){i.call(this,t),this.rect=this.rect||new e,this.img&&this.setImg(this.img,t.rect)};t.extends(s,i),s.prototype._draw=function(t){var i=this.rect;this.img&&t.drawImage(this.img,i.x,i.y,i.width,i.height,-this.originX,-this.originY,i.width,i.height)},s.prototype.setRect=function(t,i,e,s){this.rect.set(t,i,e,s),this.width=e,this.height=s},s.prototype.setImg=function(t,i){this.img=t,i?this.setRect(i.x,i.y,i.width,i.height):this.setRect(0,0,t.width,t.height)}}(),function(){var t=FL.Utils,i=FL.Bitmap,e=document.createElement("canvas");e.width=1600,e.height=800;var s=e.getContext("2d"),n=document.createElement("canvas"),h=n.getContext("2d"),o=FL.Canvas=function(t){i.call(this,t),this.cacheCtx=s,this.cacheCanvas=e};t.extends(o,i),o.prototype.setImage=function(t,i){this.rect.width=this.width=n.width=t||200,this.rect.height=this.height=n.height=i||200,h.drawImage(e,0,0),this.img=this.img||new Image,this.img.src=n.toDataURL()}}(),function(){var t=FL.Utils,i=FL.Rect,e=FL.DisplayObjectContainer,s=FL.Sprite=function(t){e.call(this,t),this.rect=this.rect||new i,this.img&&this.setImg(img,t.rect)};t.extends(s,e),s.prototype._draw=function(t){var i=this.rect;this.img&&t.drawImage(this.img,i.x,i.y,i.width,i.height,-this.originX,-this.originY,i.width,i.height)},s.prototype.setRect=function(t,i,e,s){this.rect.set(t,i,e,s),this.width=e,this.height=s},s.prototype.setImg=function(t,i){this.img=t,i?this.setRect(i.x,i.y,i.width,i.height):this.setRect(0,0,t.width,t.height)}}(),function(){var t=FL.Utils,i=FL.Sprite,e=FL.MovieClip=function(t){this._time=0,this.isPlay=!1,this.isLoop=!1,this.frameNum=0,this.totalFrame=0,this.data={},this.action="",this.frames=[],this.setFrameRate(24),i.call(this,t)};t.extends(e,i),e.prototype.play=function(t,i){if(t!=this.action||i){var e=this.data[t];this.action=t,this.frames=e.frames,this.totalFrame=e.frames.length,this.isLoop=e.loop,this.delay=e.delay||this.delay,this.frameNum=0,this._time=0,this._setFrame()}this.isPlay||(this._time=0,this.isPlay=!0)},e.prototype.stop=function(t){t&&this.play(t),this.isPlay=!1},e.prototype.addAnimation=function(t,i,e,s){if("string"==typeof i){var n=i.split(",");i=[];for(var h=0,o=n.length;o>h;h++){var r=n[h].split("-");if(1==r.length)i.push(parseInt(r[0]));else for(var a=parseInt(r[0]),p=parseInt(r[1]);p>=a;a++)i.push(a)}}var c={frames:i,loop:e||!1};s>0&&(c.delay=1e3/s),this.data[t]=c},e.prototype.setFrameRate=function(t){this.frameRate=t||24,this.delay=1e3/this.frameRate},e.prototype._update=function(){this._time+=this.timeStep,this._time>=this.delay&&(this._time=this._time-this.delay,this.frameNum++,this.frameNum>=this.totalFrame&&(this.frameNum=0,this.isLoop||this.stop()),this._setFrame())},e.prototype._draw=function(t){this.img&&t.drawImage(this.img,this.sourceX,this.sourceY,this.width,this.height,-this.originX,-this.originY,this.width,this.height),this.isPlay&&this._update()},e.prototype._setFrame=function(){var t=this.frames[this.frameNum];this.sourceX=t%this.col*this.width,this.sourceY=(t/this.col>>0)*this.height},e.prototype.setImg=function(t,i,e){this.img=t,this.width=i,this.height=e,this.col=this.img.width/this.width>>0,this.row=this.img.height/this.height>>0}}(),function(){var t=FL.DisplayObject,i=FL.Utils,e=FL.LoadProgress=function(i){t.call(this,i),this.width=this.width||400,this.height=this.height||10,this.setCenter(),this.init(i.loader)};i.extends(e,t),e.prototype.init=function(t){this.loader=t;var i=this;t.addEventListener("complete",function(){i.progress=1,t.removeEventListener("complete",arguments.callee),t.removeEventListener("progress",arguments.callee),setTimeout(function(){i.dispatchEvent({type:"complete"})},500)}),t.addEventListener("progress",function(){i.progress=t.loadSize/t.totalSize})},e.prototype.load=function(t){var i=this.loader;i.load(t)},e.prototype._draw=function(t){t.fillStyle="#69f",t.fillRect(-this.originX,-this.originY,this.width,this.height),t.fillStyle="#f69",t.fillRect(-this.originX+2,-this.originY+2,(this.width-4)*this.progress,this.height-4)}}(),function(){function t(t){for(var i=this.children,e=0,s=this.children.length;s>e;e++){var n=i[e];if(n.mouseEnable&&n.hitTestPoint(t.x,t.y))return n.dispatchEvent(t),void 0}}var i=FL.Utils,e=FL.DisplayObjectContainer,s=FL.Mouse,n=FL.Keyboard,h=FL.Stage=function(t){e.call(this,t),this.width=this.width||550,this.height=this.height||400,this.fps=this.fps||60,this.init()};i.extends(h,e),h.prototype.init=function(){this.stage=this,this.timeStep=1e3/this.fps,this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d")},h.prototype.addChildAt=function(t,i){this.superClass.addChildAt.call(this,t,i)},h.prototype.render=function(){this.ctx.clearRect(0,0,this.width,this.height),this.superClass.render.call(this,this.ctx)},h.prototype.start=function(){var t=this;this.stop(),this._interval=setInterval(function(){t.render(),t.callAll("update")},1e3/this.fps)},h.prototype.update=function(){},h.prototype.initMouseEvent=function(i){s.init(this),i&&(this.addEventListener("mousedown",t),this.addEventListener("mousemove",t),this.addEventListener("mouseup",t))},h.prototype.initKeyboardEvent=function(){n.init()},h.prototype.stop=function(){clearInterval(this._interval)}}(),function(){var t=FL.Utils,i=FL.EventDispatcher,e=FL.Audio=function(t){this.src=null,this.loop=!1,this.autoPlay=!1,this.loaded=!1,this.playing=!1,this.duration=0,this.volume=1,this.muted=!1,this._element=null,FL.merge(this,t),i.call(this),this._onAudioEvent=this._onAudioEvent.bind(this)};t.extends(e,i),FL.merge(e.prototype,{load:function(){if(!this._element){var t=this._element=new Audio;t.addEventListener("canplaythrough",this._onAudioEvent,!1),t.addEventListener("ended",this._onAudioEvent,!1),t.addEventListener("error",this._onAudioEvent,!1),t.src=this.src,t.volume=this.volume,t.load()}return this},_onAudioEvent:function(t){var i=t.type;switch(i){case"canplaythrough":t.target.removeEventListener(i,this._onAudioEvent),this.loaded=!0,this.duration=this._element.duration,this.fire("load"),this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1,this.fire("end"),this.loop&&this._doPlay();break;case"error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){return this.playing&&this.stop(),this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load()),this},pause:function(){return this.playing&&(this._element.pause(),this.playing=!1),this},resume:function(){return this.playing||this._doPlay(),this},stop:function(){return this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1),this},setVolume:function(t){return this.volume!=t&&(this.volume=t,this._element.volume=t),this},setMute:function(t){return this.muted!=t&&(this.muted=t,this._element.volume=t?0:this.volume),this}})}(),function(){var t=FL.Rect,i=FL.Camera=function(t,i,e,s,n){this.x=t,this.y=i,this.width=e,this.height=s,this.zoom=n||1,this.scroll=new Vector,this.bounds=null,this.target=null,this.deadzone=null};i.prototype.update=function(){var t=this.bounds,i=this.target,e=this.width,s=this.height,n=this.scroll,h=this.deadzone;if(i)if(h){var o=i.pos.x+(i.pos.x>0?1e-7:-1e-7),r=i.pos.y+(i.pos.y>0?1e-7:-1e-7),a=o-h.x;n.x>a&&(n.x=a),a=o+i.width-h.x-h.width,n.x<a&&(n.x=a),a=r-h.y,n.y>a&&(n.y=a),a=r+i.height-h.y-h.height,n.y<a&&(n.y=a)}else this.focusOn(i.pos.x+.5*i.width,i.pos.y+.5*i.height);t&&(n.x<t.left&&(n.x=t.left),n.x>t.right-e&&(n.x=t.right-e),n.y<t.top&&(n.y=t.top),n.y>t.bottom-s&&(n.y=t.bottom-s))},i.prototype.follow=function(i,e){this.target=i;var s,n=this.width,h=this.height;switch(e){case"platFormer":var o=n/5,r=h/3;this.deadzone=new t((n-o)/2,(h-r)/2-.25*r,o,r);break;case"topDown":s=Math.max(n,h)/4,this.deadzone=new t((n-s)/2,(h-s)/2,s,s);break;case"topDownTight":s=Math.max(n,h)/8,this.deadzone=new t((n-s)/2,(h-s)/2,s,s);break;case"direct":default:this.deadzone=null}},i.prototype.focusOn=function(t){this.scroll.set(t.x-.5*this.width,t.y-.5*this.height)},i.prototype.setBounds=function(i,e,s,n){this.bounds=this.bounds||new t,this.bounds.set(i,e,s,n),this.update()}}(),function(){function t(){for(var t=i.length-1;t>=0;t--){var s=i[t],o=e[t];s.duration>0?(s.duration-=n,("xy"==s.direction||"x"==s.direction)&&(o.x=s.x+(Math.random()-.5)*s.intensity*o.width),("xy"==s.direction||"y"==s.direction)&&(o.y=s.y+(Math.random()-.5)*s.intensity*o.height)):h.stop(o)}}var i=[],e=[],s=-1,n=17;s=setInterval(t,n);var h=FL.Shake={shake:function(t,s,n,h){var o=e.indexOf(t);o=-1==o?e.length:o,i[o]={duration:1e3*s||400,intensity:n||.01,direction:h||"xy",x:t.x,y:t.y},e[o]=t},stop:function(t){var s=e.indexOf(t);-1!=s&&(t.x=i[s].x,t.y=i[s].y,i.splice(s,1),e.splice(s,1))}}}();